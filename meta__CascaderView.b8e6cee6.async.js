(self.webpackChunk_trionesdev_antd_taro_react=self.webpackChunk_trionesdev_antd_taro_react||[]).push([[5773],{88861:function(t,e,n){"use strict";var l;n.r(e),n.d(e,{demos:function(){return H}});var d=n(90819),r=n.n(d),v=n(89933),y=n.n(v),s=n(44194),I=n(24179),a=n(95079),o=n(62901),b=n(86951),x=n(22811),E=n(51865),A=n.n(E),C=n(39378),M=n.n(C),i=n(68263),P=n(12662),N=n(26370),O=n(4222),D=n(2777),V=n(1802),k=n(82720),U=n(16860),g=n(80751),K=n(34638),H={"cascaderview-demo-base":{component:s.memo(s.lazy(function(){return n.e(5536).then(n.bind(n,55743))})),asset:{type:"BLOCK",id:"cascaderview-demo-base",refAtomIds:["CascaderView"],dependencies:{"index.tsx":{type:"FILE",value:n(47496).Z},react:{type:"NPM",value:"18.3.1"},"../index.tsx":{type:"FILE",value:n(61893).Z},"../../DemoBlock.tsx":{type:"FILE",value:n(46875).Z},"./cascader-view.tsx":{type:"FILE",value:n(42738).Z},"./index.scss":{type:"FILE",value:n(78341).Z},classnames:{type:"NPM",value:"2.5.1"},lodash:{type:"NPM",value:"4.17.21"},"./style.scss":{type:"FILE",value:n(35825).Z},"../Tabs.tsx":{type:"FILE",value:n(84620).Z},"./cascader-column.tsx":{type:"FILE",value:n(35631).Z},"./tab.tsx":{type:"FILE",value:n(27205).Z},"./tabs.tsx":{type:"FILE",value:n(65511).Z},"./cascader-column-item.tsx":{type:"FILE",value:n(91674).Z},"@trionesdev/antd-taro-icons-react":{type:"NPM",value:"0.0.1"},"./context.tsx":{type:"FILE",value:n(79517).Z},"./tab-pane.tsx":{type:"FILE",value:n(58492).Z},"./tab-nav.tsx":{type:"FILE",value:n(51432).Z}},entry:"index.tsx"},context:{"../index.tsx":a,"../../DemoBlock.tsx":o,"./cascader-view.tsx":b,"./index.scss":x,"./style.scss":i,"../Tabs.tsx":P,"./cascader-column.tsx":N,"./tab.tsx":O,"./tabs.tsx":D,"./cascader-column-item.tsx":V,"./context.tsx":U,"./tab-pane.tsx":g,"./tab-nav.tsx":K,react:l||(l=n.t(s,2)),"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/index.tsx":a,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.tsx":o,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-view.tsx":b,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.scss":x,classnames:E,lodash:C,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/style.scss":i,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/index.tsx":P,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-column.tsx":N,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab.tsx":O,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tabs.tsx":D,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-column-item.tsx":V,"@trionesdev/antd-taro-icons-react":k,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/context.tsx":U,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab-pane.tsx":g,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab-nav.tsx":K},renderOpts:{compile:function(){var Z=y()(r()().mark(function p(){var L,S=arguments;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.e(3658).then(n.bind(n,23658));case 2:return u.abrupt("return",(L=u.sent).default.apply(L,S));case 3:case"end":return u.stop()}},p)}));function j(){return Z.apply(this,arguments)}return j}()}},"cascaderview-demo-value":{component:s.memo(s.lazy(function(){return n.e(5536).then(n.bind(n,1220))})),asset:{type:"BLOCK",id:"cascaderview-demo-value",refAtomIds:["CascaderView"],dependencies:{"index.tsx":{type:"FILE",value:n(62142).Z},react:{type:"NPM",value:"18.3.1"},"../index.tsx":{type:"FILE",value:n(61893).Z},"../../DemoBlock.tsx":{type:"FILE",value:n(46875).Z},"./cascader-view.tsx":{type:"FILE",value:n(42738).Z},classnames:{type:"NPM",value:"2.5.1"},"./index.scss":{type:"FILE",value:n(78341).Z},lodash:{type:"NPM",value:"4.17.21"},"./style.scss":{type:"FILE",value:n(35825).Z},"../Tabs.tsx":{type:"FILE",value:n(84620).Z},"./cascader-column.tsx":{type:"FILE",value:n(35631).Z},"./tab.tsx":{type:"FILE",value:n(27205).Z},"./tabs.tsx":{type:"FILE",value:n(65511).Z},"./cascader-column-item.tsx":{type:"FILE",value:n(91674).Z},"@trionesdev/antd-taro-icons-react":{type:"NPM",value:"0.0.1"},"./context.tsx":{type:"FILE",value:n(79517).Z},"./tab-pane.tsx":{type:"FILE",value:n(58492).Z},"./tab-nav.tsx":{type:"FILE",value:n(51432).Z}},entry:"index.tsx"},context:{"../index.tsx":a,"../../DemoBlock.tsx":o,"./cascader-view.tsx":b,"./index.scss":x,"./style.scss":i,"../Tabs.tsx":P,"./cascader-column.tsx":N,"./tab.tsx":O,"./tabs.tsx":D,"./cascader-column-item.tsx":V,"./context.tsx":U,"./tab-pane.tsx":g,"./tab-nav.tsx":K,react:l||(l=n.t(s,2)),"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/index.tsx":a,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.tsx":o,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-view.tsx":b,classnames:E,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.scss":x,lodash:C,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/style.scss":i,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/index.tsx":P,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-column.tsx":N,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab.tsx":O,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tabs.tsx":D,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-column-item.tsx":V,"@trionesdev/antd-taro-icons-react":k,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/context.tsx":U,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab-pane.tsx":g,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab-nav.tsx":K},renderOpts:{compile:function(){var Z=y()(r()().mark(function p(){var L,S=arguments;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.e(3658).then(n.bind(n,23658));case 2:return u.abrupt("return",(L=u.sent).default.apply(L,S));case 3:case"end":return u.stop()}},p)}));function j(){return Z.apply(this,arguments)}return j}()}},"cascaderview-demo-async":{component:s.memo(s.lazy(function(){return n.e(5536).then(n.bind(n,80120))})),asset:{type:"BLOCK",id:"cascaderview-demo-async",refAtomIds:["CascaderView"],dependencies:{"index.tsx":{type:"FILE",value:n(43528).Z},react:{type:"NPM",value:"18.3.1"},"../index.tsx":{type:"FILE",value:n(61893).Z},"../../DemoBlock.tsx":{type:"FILE",value:n(46875).Z},"./cascader-view.tsx":{type:"FILE",value:n(42738).Z},"./index.scss":{type:"FILE",value:n(78341).Z},classnames:{type:"NPM",value:"2.5.1"},lodash:{type:"NPM",value:"4.17.21"},"./style.scss":{type:"FILE",value:n(35825).Z},"../Tabs.tsx":{type:"FILE",value:n(84620).Z},"./cascader-column.tsx":{type:"FILE",value:n(35631).Z},"./tab.tsx":{type:"FILE",value:n(27205).Z},"./tabs.tsx":{type:"FILE",value:n(65511).Z},"./cascader-column-item.tsx":{type:"FILE",value:n(91674).Z},"@trionesdev/antd-taro-icons-react":{type:"NPM",value:"0.0.1"},"./context.tsx":{type:"FILE",value:n(79517).Z},"./tab-pane.tsx":{type:"FILE",value:n(58492).Z},"./tab-nav.tsx":{type:"FILE",value:n(51432).Z}},entry:"index.tsx"},context:{"../index.tsx":a,"../../DemoBlock.tsx":o,"./cascader-view.tsx":b,"./index.scss":x,"./style.scss":i,"../Tabs.tsx":P,"./cascader-column.tsx":N,"./tab.tsx":O,"./tabs.tsx":D,"./cascader-column-item.tsx":V,"./context.tsx":U,"./tab-pane.tsx":g,"./tab-nav.tsx":K,react:l||(l=n.t(s,2)),"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/index.tsx":a,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.tsx":o,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-view.tsx":b,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.scss":x,classnames:E,lodash:C,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/style.scss":i,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/index.tsx":P,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-column.tsx":N,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab.tsx":O,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tabs.tsx":D,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/CascaderView/cascader-column-item.tsx":V,"@trionesdev/antd-taro-icons-react":k,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/context.tsx":U,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab-pane.tsx":g,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Tabs/tab-nav.tsx":K},renderOpts:{compile:function(){var Z=y()(r()().mark(function p(){var L,S=arguments;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.e(3658).then(n.bind(n,23658));case 2:return u.abrupt("return",(L=u.sent).default.apply(L,S));case 3:case"end":return u.stop()}},p)}));function j(){return Z.apply(this,arguments)}return j}()}}}},1802:function(t,e,n){"use strict";n.r(e),n.d(e,{CascaderColumnItem:function(){return o}});var l=n(10154),d=n.n(l),r=n(44194),v=n(51865),y=n.n(v),s=n(82720),I=n(31549),a="triones-antm-cascader-view",o=function(x){var E=x.option,A=x.onClick,C=x.selected;return(0,I.jsxs)("div",{className:y()("".concat(a,"-column-item"),d()({},"".concat(a,"-column-item-selected"),C)),onClick:function(){A==null||A(E)},children:[(0,I.jsx)("div",{children:E.label}),C&&(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(s.CheckOutline,{})})]})}},26370:function(t,e,n){"use strict";n.r(e),n.d(e,{CascaderColumn:function(){return I}});var l=n(51865),d=n.n(l),r=n(44194),v=n(1802),y=n(31549),s="triones-antm-cascader-view",I=function(o){var b=o.index,x=b===void 0?0:b,E=o.options,A=o.value,C=o.onSelect,M=function(P){C==null||C(P,x)};return(0,y.jsx)("div",{className:d()("".concat(s,"-column")),children:E==null?void 0:E.map(function(i,P){return(0,y.jsx)(v.CascaderColumnItem,{option:i,selected:(A==null?void 0:A.value)===i.value,onClick:function(){M(i)}},P)})})}},86951:function(t,e,n){"use strict";n.r(e),n.d(e,{CascaderView:function(){return C}});var l=n(76711),d=n.n(l),r=n(45332),v=n.n(r),y=n(51865),s=n.n(y),I=n(39378),a=n.n(I),o=n(44194),b=n(12662),x=n(26370),E=n(31549),A="triones-antm-cascader-view",C=function(i){var P=i.className,N=i.style,O=i.options,D=i.labelInValue,V=D===void 0?!1:D,k=i.value,U=i.onChange,g=i.asyncRequest,K=(0,o.useState)(),H=v()(K,2),Z=H[0],j=H[1],p=(0,o.useState)(O||[]),L=v()(p,2),S=L[0],G=L[1],u=(0,o.useState)([]),Q=v()(u,2),B=Q[0],w=Q[1],tn=(0,o.useState)([]),X=v()(tn,2),W=X[0],Y=X[1],q=(0,o.useState)(k||[]),nn=v()(q,2),z=nn[0],en=nn[1],m=function(f){var T=[];return f==null||f.forEach(function(h){if(h.value)if(V){var _,R;T.push({value:(_=h.value)===null||_===void 0?void 0:_.value,label:(R=h.value)===null||R===void 0?void 0:R.label})}else T.push(h.value)}),T},c=function(f,T){var h;if(!a().isEqual(f==null?void 0:f.value,(h=B[T])===null||h===void 0||(h=h.value)===null||h===void 0?void 0:h.value)){var _=[];Array.from({length:T+1},function(R,J){return J}).forEach(function(R){R===T?_.push({value:f,options:B[R].options}):_.push(B[R])}),a().isEmpty(f.children)?g?g==null||g().then(function(R){a().isArray(R)&&!a().isEmpty(R)&&(a().set(f,["children"],R),_.push({options:f.children})),w(_)}):w(_):(_.push({options:f.children}),w(_))}},$=function(f,T){return a().isEmpty(T)?null:a().find(f,function(h){return V?h.value===T.value:h.value===T})},an=function(f,T){if(!T||a().isEmpty(T))return[{options:f}];for(var h=[],_=f,R=0;R<T.length;R++){if(a().isEmpty(_))return h;var J=$(_,T[R]);h.push({options:_,value:J}),_=J==null?void 0:J.children}return a().isEmpty(_)||h.push({options:_}),h};return(0,o.useEffect)(function(){if(z===null||a().isEmpty(z))w([{options:S}]);else{var F=an(S,z);w(d()(F))}},[S]),(0,o.useEffect)(function(){a().isEmpty(O)?g?g==null||g().then(function(F){a().isArray(F)&&!a().isEmpty(F)&&G(F||[])}):G([]):G(O||[])},[O]),(0,o.useEffect)(function(){k!==void 0&&(a().isEqual(k,z)||en(k))},[k]),(0,o.useEffect)(function(){if(console.log("newColumns",B),!a().isEmpty(B)){var F=B.map(function(T,h){var _;return{key:"".concat(h),label:((_=T.value)===null||_===void 0?void 0:_.label)||"\u8BF7\u9009\u62E9",children:(0,E.jsx)(x.CascaderColumn,{index:h,options:T.options,value:T.value,onSelect:c})}});Y(F),j("".concat(a().size(B)-1))}var f=m(B);a().isEqual(f||[],z||[])||(console.log("newValue",f,z),en(f||[]),U==null||U(f||[]))},[B]),(0,E.jsx)("div",{className:s()(A,P),style:N,children:(0,E.jsx)(b.default,{activeKey:Z,onChange:j,items:W,stretch:!1,style:{height:"100%"}})})}},95079:function(t,e,n){"use strict";n.r(e);var l=n(86951);e.default=l.CascaderView},62901:function(t,e,n){"use strict";n.r(e),n.d(e,{DemoBlock:function(){return v}});var l=n(44194),d=n(22811),r=n(31549),v=function(s){return(0,r.jsxs)("div",{className:"demoBlock",children:[(0,r.jsx)("div",{className:"demoTitle",children:s.title}),(0,r.jsx)("div",{className:"demoMain",style:{padding:"12px 12px",background:"#ffffff"},children:s.children})]})}},16860:function(t,e,n){"use strict";n.r(e),n.d(e,{TabsContext:function(){return d}});var l=n(44194),d=(0,l.createContext)({items:[]})},12662:function(t,e,n){"use strict";n.r(e);var l=n(2777),d=n(4222),r=l.Tabs;r.Tab=d.Tab,e.default=r},34638:function(t,e,n){"use strict";n.r(e),n.d(e,{TabNav:function(){return a}});var l=n(10154),d=n.n(l),r=n(44194),v=n(51865),y=n.n(v),s=n(31549),I="triones-antm-tabs",a=function(b){var x=b.label,E=b.active,A=b.stretch,C=b.onClick,M=(0,r.useRef)(null),i=(0,r.useRef)(null);return(0,s.jsx)("div",{ref:M,className:y()("".concat(I,"-tab"),d()(d()({},"".concat(I,"-tab-active"),E),"".concat(I,"-tab-stretch"),A)),onClick:function(N){C==null||C(N)},children:(0,s.jsx)("div",{ref:i,className:y()("".concat(I,"-tab-inner")),children:x})})}},80751:function(t,e,n){"use strict";n.r(e),n.d(e,{TabPane:function(){return o}});var l=n(10154),d=n.n(l),r=n(51865),v=n.n(r),y=n(44194),s=n(16860),I=n(31549),a="triones-antm-tabs",o=function(x){var E=x.children,A=x.tabKey,C=(0,y.useContext)(s.TabsContext),M=C.activeKey;return(0,I.jsx)("div",{className:v()("".concat(a,"-tab-pane"),d()({},"".concat(a,"-tab-pane-active"),M==A)),children:E})}},4222:function(t,e,n){"use strict";n.r(e),n.d(e,{Tab:function(){return l}});var l=function(r){var v=r.children,y=r.key,s=r.label;return null}},2777:function(t,e,n){"use strict";n.r(e),n.d(e,{Tabs:function(){return N}});var l=n(76711),d=n.n(l),r=n(45332),v=n.n(r),y=n(51865),s=n.n(y),I=n(39378),a=n.n(I),o=n(44194),b=n(16860),x=n(68263),E=n(4222),A=n(34638),C=n(80751),M=n(31549),i="triones-antm-tabs",P=function(O){return O[O.SET_ITEMS=0]="SET_ITEMS",O[O.ADD_ITEM=1]="ADD_ITEM",O}(P||{}),N=function(D){var V,k=D.children,U=D.className,g=D.style,K=D.activeKey,H=D.defaultActiveKey,Z=D.stretch,j=Z===void 0?!0:Z,p=D.items,L=D.onTabClick,S=D.onChange,G=(0,o.useRef)(null),u=(0,o.useState)(K||H||(p==null||(V=p[0])===null||V===void 0?void 0:V.key)),Q=v()(u,2),B=Q[0],w=Q[1],tn=(0,o.useReducer)(function(m,c){switch(c.type){case P.SET_ITEMS:return c.payload;case P.ADD_ITEM:return[].concat(d()(m),[c.payload])}return m},p||[]),X=v()(tn,2),W=X[0],Y=X[1],q=function(c){S==null||S(c)},nn=function(c,$){L==null||L(c,$),w(c),q(c)},z=function(c){Y({type:P.SET_ITEMS,payload:c})},en=function(c){Y({type:P.ADD_ITEM,payload:c})};return(0,o.useEffect)(function(){console.log("activeKey tabs",K),K!==void 0&&K!==B&&w(K)},[K]),(0,o.useEffect)(function(){p!==void 0&&(a().isEqual(p,W)||z(p))},[p]),(0,o.useEffect)(function(){if(!B){var m,c;w(p==null||(m=p[0])===null||m===void 0?void 0:m.key),q(p==null||(c=p[0])===null||c===void 0?void 0:c.key)}},[B,W]),(0,o.useEffect)(function(){if(k&&a().isArray(k)){var m,c=k.filter(function($){return $.type===E.Tab}).map(function($){return{key:$.key,label:$.props.label,children:$.props.children}});z(c),w(K||H||(c==null||(m=c[0])===null||m===void 0?void 0:m.key))}},[k]),(0,M.jsx)(b.TabsContext.Provider,{value:{activeKey:B,setActiveKey:w,items:W||[],setItems:z,addItem:en},children:(0,M.jsxs)("div",{className:s()(i,U),style:g,children:[(0,M.jsx)("div",{className:s()("".concat(i,"-nav")),children:(0,M.jsx)("div",{className:s()("".concat(i,"-nav-wrap")),children:(0,M.jsx)("div",{ref:G,className:s()("".concat(i,"-nav-list")),children:!a().isEmpty(W)&&(W==null?void 0:W.map(function(m,c){return(0,M.jsx)(A.TabNav,{active:B===m.key,stretch:j,label:m.label,onClick:function(an){nn(m.key,an)}},"tab-nav-".concat(c))}))})})}),(0,M.jsx)("div",{className:s()("".concat(i,"-content-holder")),children:(0,M.jsx)("div",{className:s()("".concat(i,"-content")),children:!a().isEmpty(W)&&(W==null?void 0:W.map(function(m,c){return(0,M.jsx)(C.TabPane,{tabKey:m.key,children:m.children},"tab-panel-".concat(m.key))}))})})]})})}},22811:function(t,e,n){"use strict";n.r(e)},68263:function(t,e,n){"use strict";n.r(e)},72927:function(t,e,n){"use strict";n.r(e),n.d(e,{texts:function(){return d}});var l=n(24179);const d=[]},91674:function(t,e){"use strict";e.Z=`import React from "react";
import {FC} from "react";
import classNames from "classnames";
import { CheckOutline } from "@trionesdev/antd-taro-icons-react";

const cascaderViewCls = 'triones-antm-cascader-view'

type CascaderColumnItemProps = {
  option: any
  onClick?: (option: any) => void
  selected?: boolean
}
export const CascaderColumnItem: FC<CascaderColumnItemProps> = ({
                                                                  option,
                                                                  onClick,
                                                                  selected
                                                                }) => {
  return <div
    className={classNames(\`\${cascaderViewCls}-column-item\`, {[\`\${cascaderViewCls}-column-item-selected\`]: selected})}
    onClick={() => {
      onClick?.(option)
    }}>
    <div>{option.label}</div>
    {selected && <><CheckOutline/></>}
  </div>
}
`},35631:function(t,e){"use strict";e.Z=`import classNames from 'classnames';
import React, { FC } from 'react';
import { CascaderColumnItem } from './cascader-column-item';

const cascaderViewCls = 'triones-antm-cascader-view';
type CascaderColumnProps = {
  index?: number;
  options?: any[];
  value: any;
  onSelect?: (option: any, columnIndex: number) => void;
};
export const CascaderColumn: FC<CascaderColumnProps> = ({
  index = 0,
  options,
  value,
  onSelect,
}) => {
  const handleOnSelect = (option: any) => {
    onSelect?.(option, index);
  };

  return (
    <div className={classNames(\`\${cascaderViewCls}-column\`)}>
      {options?.map((option: any, index: number) => {
        return (
          <CascaderColumnItem
            key={index}
            option={option}
            selected={value?.value === option.value}
            onClick={() => {
              handleOnSelect(option);
            }}
          />
        );
      })}
    </div>
  );
};
`},42738:function(t,e){"use strict";e.Z=`import classNames from 'classnames';
import _ from 'lodash';
import React, { CSSProperties, FC, useEffect, useState } from 'react';
import Tabs from '../Tabs';
import { CascaderColumn } from './cascader-column';
import './style.scss';
import { Column, ColumnOption } from './types';

const cascaderViewCls = 'triones-antm-cascader-view';

export type CascaderViewProps = {
  className?: string;
  style?: CSSProperties;
  options?: any[];
  labelInValue?: boolean;
  value?: any;
  onChange?: (value: any) => void;
  asyncRequest?: (parentValue?: any) => Promise<any>;
};

export const CascaderView: FC<CascaderViewProps> = ({
  className,
  style,
  options,
  labelInValue = false,
  value,
  onChange,
  asyncRequest,
}) => {
  const [activeKey, setActiveKey] = useState<any>();
  const [internalOptions, setInternalOptions] = useState<any>(options || []);
  const [columns, setColumns] = useState<Column[]>([]);
  const [tabItems, setTabItems] = useState<any>([]);
  const [internalValue, setInternalValue] = useState<any>(value || []);

  const handleComputeValue = (columns?: Column[]) => {
    const result: any = [];
    columns?.forEach((column: any) => {
      if (column.value) {
        if (labelInValue) {
          result.push({
            value: column.value?.value,
            label: column.value?.label,
          });
        } else {
          result.push(column.value);
        }
      }
    });
    return result;
    // setInternalValue(newValue || [])
    // onChange?.(newValue || [])
  };

  const handleSelect = (option: any, columnIndex: number) => {
    if (_.isEqual(option?.value, columns[columnIndex]?.value?.value)) {
      return;
    }

    const newColumns: any[] = [];
    Array.from({ length: columnIndex + 1 }, (_, i) => i).forEach((i) => {
      if (i === columnIndex) {
        newColumns.push({ value: option, options: columns[i].options });
      } else {
        newColumns.push(columns[i]);
      }
    });
    if (!_.isEmpty(option.children)) {
      newColumns.push({ options: option.children });
      setColumns(newColumns);
    } else {
      if (asyncRequest) {
        asyncRequest?.().then((data: any) => {
          if (_.isArray(data) && !_.isEmpty(data)) {
            _.set(option, ['children'], data);
            newColumns.push({ options: option.children });
            setColumns(newColumns);
          } else {
            setColumns(newColumns);
          }
        });
      } else {
        setColumns(newColumns);
      }
    }
  };

  const handleFindOptionByValue = (options: ColumnOption[], value: any) => {
    if (_.isEmpty(value)) {
      return null;
    }
    return _.find(options, (option: ColumnOption) => {
      if (labelInValue) {
        return option.value === value.value;
      } else {
        return option.value === value;
      }
    });
  };

  const handleGenerateColumnsByValues = (
    options: any,
    value: any,
  ): Column[] => {
    if (!value || _.isEmpty(value)) {
      return [
        {
          options: options,
        },
      ];
    }
    const newColumns: Column[] = [];
    let currentOptions = options;
    for (let i = 0; i < value.length; i++) {
      if (_.isEmpty(currentOptions)) {
        return newColumns;
      }
      const option = handleFindOptionByValue(currentOptions, value[i]);
      newColumns.push({
        options: currentOptions,
        value: option,
      });
      currentOptions = option?.children;
    }
    if (!_.isEmpty(currentOptions)) {
      newColumns.push({
        options: currentOptions,
      });
    }
    return newColumns;
  };

  useEffect(() => {
    if (internalValue === null || _.isEmpty(internalValue)) {
      setColumns([
        {
          options: internalOptions,
        },
      ]);
    } else {
      const newColumns = handleGenerateColumnsByValues(
        internalOptions,
        internalValue,
      );
      setColumns([...newColumns]);
    }
  }, [internalOptions]);

  useEffect(() => {
    // if (_.isEqual(options, internalOptions)) {
    //   return;
    // }
    if (!_.isEmpty(options)) {
      setInternalOptions(options || []);
    } else {
      if (asyncRequest) {
        asyncRequest?.().then((data: any) => {
          if (_.isArray(data) && !_.isEmpty(data)) {
            setInternalOptions(data || []);
          }
        });
      } else {
        setInternalOptions([]);
      }
    }
  }, [options]);

  useEffect(() => {
    if (value === undefined) {
      return;
    }
    if (_.isEqual(value, internalValue)) {
      return;
    }
    setInternalValue(value);
  }, [value]);

  useEffect(() => {
    console.log('newColumns', columns);
    if (!_.isEmpty(columns)) {
      const items = columns.map((column, index: number) => {
        return {
          key: \`\${index}\`,
          label: column.value?.label || '\u8BF7\u9009\u62E9',
          children: (
            <CascaderColumn
              index={index}
              options={column.options}
              value={column.value}
              onSelect={handleSelect}
            />
          ),
        };
      });
      setTabItems(items);
      setActiveKey(\`\${_.size(columns) - 1}\`);
    }
    const newValue = handleComputeValue(columns);
    if (!_.isEqual(newValue || [], internalValue || [])) {
      console.log('newValue', newValue, internalValue);
      setInternalValue(newValue || []);
      onChange?.(newValue || []);
    }
  }, [columns]);

  return (
    <div className={classNames(cascaderViewCls, className)} style={style}>
      <Tabs
        activeKey={activeKey}
        onChange={setActiveKey}
        items={tabItems}
        stretch={false}
        style={{ height: '100%' }}
      />
    </div>
  );
};
`},43528:function(t,e){"use strict";e.Z=`import React from "react"
import {DemoBlock} from "../../DemoBlock";
import CascaderView from "../index";

export default () => {
  return <>
    <DemoBlock title={\`\u8BBE\u7F6E\u503C\`}>
      <CascaderView options={[]} style={{height: 200}} value={['jiangsu','suzhou','gushu']} asyncRequest={()=>{
        return Promise.resolve([
          {
            value: "jiangsu",
            label: "\u6C5F\u82CF",
          },
          {
            value: "zhejiang",
            label: "\u6D59\u6C5F",
          },
          {
            value: "shanghai",
            label: "\u4E0A\u6D77"
          },
          {
            value: "shandong",
            label: '\u5C71\u4E1C'
          },
          {
            value: "henan",
            label: '\u6CB3\u5357'
          },
          {
            value: "hebei",
            label: '\u6CB3\u5317'
          },
          {
            value: "hunan",
            label: '\u6E56\u5357'
          },
          {
            value: "hubei",
            label: '\u6E56\u5317'
          }
        ])
      }}/>
    </DemoBlock>
  </>
}
`},47496:function(t,e){"use strict";e.Z=`import React from "react"
import {DemoBlock} from "../../DemoBlock";
import CascaderView from "../index";

export default () => {
  const options = [
    {
      value: "jiangsu",
      label: "\u6C5F\u82CF",
      children: [
        {
          value: "nanjing",
          label: '\u5357\u4EAC',
        },
        {
          value: "wuxi",
          label: '\u65E0\u9521',
        }, {
          value: "changzhou",
          label: '\u5E38\u5DDE',
        }, {
          value: "suzhou",
          label: '\u82CF\u5DDE',
          children: [
            {
              value: "gushu",
              label: '\u59D1\u82CF\u533A'
            }
          ]
        },
      ]
    },
    {
      value: "zhejiang",
      label: "\u6D59\u6C5F",
      children: [
        {
          value: "hangzhou",
          label: '\u676D\u5DDE',
        },
        {
          value: "wenzhou",
          label: '\u6E29\u5DDE',
        }
      ]
    },
    {
      value: "shanghai",
      label: "\u4E0A\u6D77"
    },
    {
      value: "shandong",
      label: '\u5C71\u4E1C'
    },
    {
      value: "henan",
      label: '\u6CB3\u5357'
    },
    {
      value: "hebei",
      label: '\u6CB3\u5317'
    },
    {
      value: "hunan",
      label: '\u6E56\u5357'
    },
    {
      value: "hubei",
      label: '\u6E56\u5317'
    }
  ]
  return <>
    <DemoBlock title={\`\u57FA\u672C\u4F7F\u7528\`}>
      <CascaderView options={options} style={{height: 200}}/>
    </DemoBlock>
  </>
}
`},62142:function(t,e){"use strict";e.Z=`import React from "react"
import {DemoBlock} from "../../DemoBlock";
import CascaderView from "../index";

export default () => {
  const options = [
    {
      value: "jiangsu",
      label: "\u6C5F\u82CF",
      children: [
        {
          value: "nanjing",
          label: '\u5357\u4EAC',
        },
        {
          value: "wuxi",
          label: '\u65E0\u9521',
        }, {
          value: "changzhou",
          label: '\u5E38\u5DDE',
        }, {
          value: "suzhou",
          label: '\u82CF\u5DDE',
          children: [
            {
              value: "gushu",
              label: '\u59D1\u82CF\u533A'
            }
          ]
        },
      ]
    },
    {
      value: "zhejiang",
      label: "\u6D59\u6C5F",
      children: [
        {
          value: "hangzhou",
          label: '\u676D\u5DDE',
        },
        {
          value: "wenzhou",
          label: '\u6E29\u5DDE',
        }
      ]
    },
    {
      value: "shanghai",
      label: "\u4E0A\u6D77"
    },
    {
      value: "shandong",
      label: '\u5C71\u4E1C'
    },
    {
      value: "henan",
      label: '\u6CB3\u5357'
    },
    {
      value: "hebei",
      label: '\u6CB3\u5317'
    },
    {
      value: "hunan",
      label: '\u6E56\u5357'
    },
    {
      value: "hubei",
      label: '\u6E56\u5317'
    }
  ]
  return <>
    <DemoBlock title={\`\u8BBE\u7F6E\u503C\`}>
      <CascaderView options={options} style={{height: 200}} value={['jiangsu','suzhou','gushu']}/>
    </DemoBlock>
  </>
}
`},61893:function(t,e){"use strict";e.Z=`import {CascaderView,CascaderViewProps} from "./cascader-view"

export type {
  CascaderViewProps,
}
export default CascaderView
`},78341:function(t,e){"use strict";e.Z=`.demoBlock {
  font-size: 14px;
  margin-bottom: 12px;
  &:last-of-type {
    padding-bottom: 32px;
  }
  scrollbar-width: thin;
}

.demoTitle {
  padding: 12px 12px 8px;
  color: #697b8c;
  font-size: 14px;
  background: #fafbfc;
}

.demoMain {
  border-right: none;
  border-left: none;
}
`},46875:function(t,e){"use strict";e.Z=`import React from 'react'
import type { FC, ReactNode } from 'react'
import './index.scss'

interface Props {
  title: string
  padding?: string
  background?: string
  children?: ReactNode
}

export const DemoBlock: FC<Props> = props => {
  return (
    <div className='demoBlock'>
      <div className='demoTitle'>{props.title}</div>
      <div
        className='demoMain'
        style={{
          padding: '12px 12px',
          background: '#ffffff',
        }}
      >
        {props.children}
      </div>
    </div>
  )
}
`},79517:function(t,e){"use strict";e.Z=`import {createContext} from "react";
import {TabItemProps} from "./tab";

type TabsContextType = {
  activeKey?: string
  setActiveKey?: (activeKey?: string) => void
  items: TabItemProps[]
  setItems?: (tabItems: TabItemProps[]) => void
  addItem?: (tabItem: TabItemProps) => void
}
export const TabsContext = createContext<TabsContextType>({
  items: []
})
`},84620:function(t,e){"use strict";e.Z=`import {Tabs as InternalTabs,TabsProps} from "./tabs"
import {Tab} from "./tab";

type InternalTabsType = typeof InternalTabs
type CompoundedComponent = InternalTabsType & {
  Tab: typeof Tab
}


export type {
  TabsProps
}
const Tabs = InternalTabs as CompoundedComponent
Tabs.Tab = Tab
export default Tabs;
`},35825:function(t,e){"use strict";e.Z=`$tabsCls: 'triones-antm-tabs';

.#{$tabsCls} {
  display: flex;
  flex-direction: column;
  &-nav {
    position: relative;
    display: flex;
    flex: none;
    align-items: center;

    &::before {
      bottom: 0;
      position: absolute;
      right: 0;
      left: 0;
      border-bottom: 1Px solid #f0f0f0;
      content: ' ';
    }

    &-wrap {
      //position: relative;
      //display: flex;
      //flex: auto;
      //align-self: stretch;
      //overflow: hidden;
      //white-space: nowrap;
      //transform: translate(0);
      width: 100%;
    }

    &-list {
      position: relative;
      display: flex;
      flex: auto;
      overflow-y: auto;
      scrollbar-width: none;
    }
  }

  &-ink-bar {
    position: absolute;
    bottom: 0;
    background-color: #1677ff;
    height: 2px;
    //width: 100px;
    &-animated {

    }
  }

  &-tab {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10Px 10Px;
    font-size: 14Px;
    background: transparent;
    border: 0;
    outline: none;
    cursor: pointer;
    color: rgba(0, 0, 0, 0.88);
    white-space: nowrap;

    &-stretch {
      flex: auto;
    }

    &-active {
      color: #1677ff;
      &::after{
        content: ' ';
        position: absolute;
        bottom: 0;
        width: calc(100% - 0.24rem * 2);
        height: 0.04rem;
        overflow: hidden;
        font-size: 0;
        border-radius: 50vh;
        box-sizing: border-box;
        background-color: var(--tabs-active-decorate-color, #1677ff);
      }
    }

  }

  &-content-holder {
    flex: auto;
    overflow: hidden;
    .#{$tabsCls} {
      &-content {
        height: 100%;
      }
    }
  }

  &-tab-pane {
    height: 100%;
    display: none;

    &-active {
      display: block;
    }
  }
}

`},51432:function(t,e){"use strict";e.Z=`import React, {FC, MouseEvent, useEffect, useRef} from "react";
import classNames from "classnames";

const tabsCls = \`triones-antm-tabs\`

type TabNavProps = {
  label?: React.ReactNode;
  active?: boolean;
  stretch?: boolean;
  onClick?: (e: MouseEvent<HTMLDivElement>) => void;
}
export const TabNav: FC<TabNavProps> = ({label, active, stretch, onClick}) => {
  const tabNavRef = useRef<HTMLDivElement>(null);
  const tabNavInnerRef = useRef<HTMLDivElement>(null);

  return <div ref={tabNavRef} className={classNames(\`\${tabsCls}-tab\`, {
    [\`\${tabsCls}-tab-active\`]: active,
    [\`\${tabsCls}-tab-stretch\`]: stretch
  })}
              onClick={(e) => {
                onClick?.(e)
              }}
  >
    <div ref={tabNavInnerRef} className={classNames(\`\${tabsCls}-tab-inner\`)}>{label}</div>
  </div>
}
`},58492:function(t,e){"use strict";e.Z=`import classNames from "classnames";
import React, {FC, useContext} from "react";
import {TabsContext} from "./context";

const tabsCls = \`triones-antm-tabs\`

type  TabPaneProps = {
  children: React.ReactNode,
  tabKey: string
}
export const TabPane: FC<TabPaneProps> = ({children, tabKey}) => {
  const {activeKey} = useContext(TabsContext)
  return <div className={classNames(\`\${tabsCls}-tab-pane\`, {[\`\${tabsCls}-tab-pane-active\`]: activeKey == tabKey})}>
    {children}
  </div>
}
`},27205:function(t,e){"use strict";e.Z=`import React, {FC} from "react"

export type TabItemProps = {
  children?: React.ReactNode
  key: string
  label?: React.ReactNode
}
export const Tab: FC<TabItemProps> = ({children, key, label}) => {
  return null
}
`},65511:function(t,e){"use strict";e.Z=`import classNames from 'classnames';
import _ from 'lodash';
import React, {
  FC,
  MouseEvent,
  useEffect,
  useReducer,
  useRef,
  useState,
} from 'react';
import { TabsContext } from './context';
import './style.scss';
import { Tab, TabItemProps } from './tab';
import { TabNav } from './tab-nav';
import { TabPane } from './tab-pane';

export type TabsProps = {
  children?: React.ReactNode;
  className?: string;
  style?: React.CSSProperties;
  activeKey?: string;
  defaultActiveKey?: string;
  /**
   * @description \u662F\u5426\u62C9\u4F38
   * @default true
   */
  stretch?: boolean;
  items?: TabItemProps[];
  /**
   * @description Tab \u70B9\u51FB\u56DE\u8C03
   */
  onTabClick?: (key: string, e: MouseEvent) => void;
  /**
   * @description \u6FC0\u6D3Bkey\u53D8\u5316\u56DE\u8C03
   */
  onChange?: (activeKey?: string) => void;
};

const tabsCls = \`triones-antm-tabs\`;

enum ITEMS_ACTION {
  SET_ITEMS,
  ADD_ITEM,
}

export const Tabs: FC<TabsProps> = ({
  children,
  className,
  style,
  activeKey,
  defaultActiveKey,
  stretch = true,
  items,
  onTabClick,
  onChange,
}) => {
  const tabNavRef = useRef<HTMLDivElement>(null);
  const [internalActiveKey, setInternalActiveKey] = useState<
    string | undefined
  >(activeKey || defaultActiveKey || items?.[0]?.key);
  const [internalItems, dispatch] = useReducer(
    (prevState: TabItemProps[], action: any) => {
      switch (action.type) {
        case ITEMS_ACTION.SET_ITEMS:
          return action.payload;
        case ITEMS_ACTION.ADD_ITEM:
          return [...prevState, action.payload];
      }
      return prevState;
    },
    items || [],
  );

  const handleChange = (activeKey?: any) => {
    onChange?.(activeKey);
  };

  const handleTabClick = (key: string, e: MouseEvent<any>) => {
    onTabClick?.(key, e);
    setInternalActiveKey(key);
    handleChange(key);
  };

  const handleSetItems = (items: any) => {
    dispatch({ type: ITEMS_ACTION.SET_ITEMS, payload: items });
  };

  const handleAddItem = (item: any) => {
    dispatch({ type: ITEMS_ACTION.ADD_ITEM, payload: item });
  };

  useEffect(() => {
    console.log('activeKey tabs', activeKey);
    if (activeKey === undefined) {
      return;
    }
    if (activeKey === internalActiveKey) {
      return;
    }
    setInternalActiveKey(activeKey);
  }, [activeKey]);

  useEffect(() => {
    if (items === undefined) {
      return;
    }
    if (_.isEqual(items, internalItems)) {
      return;
    }
    handleSetItems(items);
  }, [items]);

  useEffect(() => {
    if (internalActiveKey) {
    } else {
      setInternalActiveKey(items?.[0]?.key);
      handleChange(items?.[0]?.key);
    }
  }, [internalActiveKey, internalItems]);

  useEffect(() => {
    if (children) {
      if (_.isArray(children)) {
        const tabItems = children
          .filter((tab) => {
            return tab.type === Tab;
          })
          .map((tab) => {
            return {
              key: tab.key,
              label: tab.props.label,
              children: tab.props.children,
            };
          });
        handleSetItems(tabItems);
        setInternalActiveKey(
          activeKey || defaultActiveKey || tabItems?.[0]?.key,
        );
      }
    }
  }, [children]);

  return (
    <TabsContext.Provider
      value={{
        activeKey: internalActiveKey,
        setActiveKey: setInternalActiveKey,
        items: internalItems || [],
        setItems: handleSetItems,
        addItem: handleAddItem,
      }}
    >
      <div className={classNames(tabsCls, className)} style={style}>
        <div className={classNames(\`\${tabsCls}-nav\`)}>
          <div className={classNames(\`\${tabsCls}-nav-wrap\`)}>
            <div ref={tabNavRef} className={classNames(\`\${tabsCls}-nav-list\`)}>
              {!_.isEmpty(internalItems) &&
                internalItems?.map((item: any, index: number) => {
                  return (
                    <TabNav
                      active={internalActiveKey === item.key}
                      stretch={stretch}
                      label={item.label}
                      key={\`tab-nav-\${index}\`}
                      onClick={(e) => {
                        handleTabClick(item.key, e);
                      }}
                    />
                  );
                })}
            </div>
          </div>
        </div>
        <div className={classNames(\`\${tabsCls}-content-holder\`)}>
          <div className={classNames(\`\${tabsCls}-content\`)}>
            {!_.isEmpty(internalItems) &&
              internalItems?.map((item: any, index: number) => {
                return (
                  <TabPane key={\`tab-panel-\${item.key}\`} tabKey={item.key}>
                    {item.children}
                  </TabPane>
                );
              })}
          </div>
        </div>
      </div>
    </TabsContext.Provider>
  );
};
`},78445:function(t,e,n){var l=n(88513);function d(r){if(Array.isArray(r))return l(r)}t.exports=d,t.exports.__esModule=!0,t.exports.default=t.exports},26431:function(t){function e(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},93647:function(t){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},76711:function(t,e,n){var l=n(78445),d=n(26431),r=n(15274),v=n(93647);function y(s){return l(s)||d(s)||r(s)||v()}t.exports=y,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
