(self.webpackChunk_trionesdev_antd_taro_react=self.webpackChunk_trionesdev_antd_taro_react||[]).push([[1141],{78083:function(e,t,n){"use strict";var _,a;n.r(t),n.d(t,{demos:function(){return b}});var o=n(90819),l=n.n(o),i=n(89933),m=n.n(i),d=n(44194),f=n(99735),v=n(70162),P=n(49387),k=n(93977),u=n(73079),s=n(37180),E=n(91518),C=n(56321),p=n(51865),D=n.n(p),r=n(3687),h=n(43427),x=n(27311),b={"popup-demo-base":{component:d.memo(d.lazy(function(){return n.e(8613).then(n.bind(n,49963))})),asset:{type:"BLOCK",id:"popup-demo-base",refAtomIds:["Popup"],dependencies:{"index.tsx":{type:"FILE",value:n(26107).Z},react:{type:"NPM",value:"18.3.1"},"../index.tsx":{type:"FILE",value:n(81891).Z},"../../DemoBlock.tsx":{type:"FILE",value:n(7761).Z},"../../Button.tsx":{type:"FILE",value:n(77306).Z},"./popup.tsx":{type:"FILE",value:n(30226).Z},"./button.tsx":{type:"FILE",value:n(6458).Z},"./index.scss":{type:"FILE",value:n(21791).Z},"react-dom":{type:"NPM",value:"18.3.1"},classnames:{type:"NPM",value:"2.5.1"},"./style.scss":{type:"FILE",value:n(98092).Z},"./popup-modal.tsx":{type:"FILE",value:n(67353).Z},"@trionesdev/antd-taro-icons-react":{type:"NPM",value:"0.0.1"}},entry:"index.tsx"},context:{"../index.tsx":v,"../../DemoBlock.tsx":P,"../../Button.tsx":k,"./popup.tsx":u,"./button.tsx":s,"./index.scss":E,"./style.scss":r,"./popup-modal.tsx":h,react:_||(_=n.t(d,2)),"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Popup/index.tsx":v,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.tsx":P,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Button/index.tsx":k,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Popup/popup.tsx":u,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Button/button.tsx":s,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.scss":E,"react-dom":a||(a=n.t(C,2)),classnames:p,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Popup/style.scss":r,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/Popup/popup-modal.tsx":h,"@trionesdev/antd-taro-icons-react":x},renderOpts:{compile:function(){var R=m()(l()().mark(function T(){var c,M=arguments;return l()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,n.e(4521).then(n.bind(n,24521));case 2:return O.abrupt("return",(c=O.sent).default.apply(c,M));case 3:case"end":return O.stop()}},T)}));function B(){return R.apply(this,arguments)}return B}()}}}},37180:function(e,t,n){"use strict";n.r(t),n.d(t,{Button:function(){return k}});var _=n(10154),a=n.n(_),o=n(84176),l=n.n(o),i=n(87695),m=n(44194),d=n(51865),f=n.n(d),v=n(31549),P=["children","block","type","color","danger","disabled","className","style","icon","iconPosition","loading","variant","onClick"],k=function(s){var E=s.children,C=s.block,p=C===void 0?!1:C,D=s.type,r=D===void 0?"default":D,h=s.color,x=s.danger,b=x===void 0?!1:x,R=s.disabled,B=s.className,T=s.style,c=s.icon,M=s.iconPosition,y=M===void 0?"start":M,O=s.loading,W=s.variant,K=s.onClick,A=l()(s,P),g="triones-antm-button",I=h,L=W;return r&&(h||(r==="primary"||r==="link"?I="primary":r==="default"&&(I="default")),W||(r==="primary"?L="solid":r==="default"?L="outlined":(r==="dashed"||r==="link"||r==="text")&&(L=r))),b&&(I="danger"),(0,v.jsxs)("button",{onClick:K,className:f()(g,a()(a()(a()(a()({},"".concat(g,"-block"),p),"".concat(g,"-type-").concat(r),r),"".concat(g,"-color-").concat(I),I),"".concat(g,"-variant-").concat(L),L)),disabled:R,children:[y=="start"&&c,E,y=="end"&&c]})}},93977:function(e,t,n){"use strict";n.r(t);var _=n(37180);t.default=_.Button},49387:function(e,t,n){"use strict";n.r(t),n.d(t,{DemoBlock:function(){return l}});var _=n(44194),a=n(91518),o=n(31549),l=function(m){return(0,o.jsxs)("div",{className:"demoBlock",children:[(0,o.jsx)("div",{className:"demoTitle",children:m.title}),(0,o.jsx)("div",{className:"demoMain",style:{padding:"12px 12px",background:"#ffffff"},children:m.children})]})}},70162:function(e,t,n){"use strict";n.r(t);var _=n(73079);t.default=_.Popup},43427:function(e,t,n){"use strict";n.r(t),n.d(t,{PopupModal:function(){return P}});var _=n(45332),a=n.n(_),o=n(44194),l=n(51865),i=n.n(l),m=n(3687),d=n(27311),f=n(31549),v="triones-antm-popup",P=function(u){var s=u.children,E=u.styles,C=u.afterClose,p=u.open,D=u.position,r=D===void 0?"bottom":D,h=u.closable,x=h===void 0?!1:h,b=u.maskClosable,R=b===void 0?!0:b,B=u.destroyOnClose,T=B===void 0?!1:B,c=u.zIndex,M=c===void 0?1e3:c,y=u.afterOpenChange,O=u.onDestroy,W=o.useState(p||!1),K=a()(W,2),A=K[0],g=K[1],I=function(){g(!1),C==null||C()};return(0,o.useEffect)(function(){y==null||y(A),A||T&&(O==null||O())},[A]),(0,o.useEffect)(function(){p!=null&&p!=A&&g(p)},[p]),(0,f.jsxs)("div",{className:i()(v),style:{zIndex:M,display:A?"block":"none"},children:[(0,f.jsx)("div",{className:i()("".concat(v,"-mask")),onClick:function(){R&&I()}}),(0,f.jsxs)("div",{className:i()("".concat(v,"-body"),"".concat(v,"-").concat(r)),style:E==null?void 0:E.body,children:[x&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(d.CloseOutline,{className:i()("".concat(v,"-close")),onClick:function(){I()}})}),s]})]})}},73079:function(e,t,n){"use strict";n.r(t),n.d(t,{Popup:function(){return u}});var _=n(73193),a=n.n(_),o=n(45332),l=n.n(o),i=n(84176),m=n.n(i),d=n(44194),f=n(56321),v=n(43427),P=n(31549),k=["children","getContainer","open"],u=function(E){var C=E.children,p=E.getContainer,D=E.open,r=D===void 0?!1:D,h=m()(E,k),x=d.useState(!1),b=l()(x,2),R=b[0],B=b[1],T=d.useRef(null),c=d.useRef(null),M=(p==null?void 0:p())||T.current,y=function(){c.current||(c.current=document.createElement("div"),M.appendChild(c.current));var W=function(){M&&c.current&&M.removeChild(c.current),c.current=null,B(!1)};return(0,P.jsx)(P.Fragment,{children:(0,f.createPortal)((0,P.jsx)(v.PopupModal,a()(a()({},h),{},{onDestroy:W,open:r,children:C})),c.current)})};return(0,d.useEffect)(function(){r&&!R&&B(!0)},[r]),(0,P.jsxs)(P.Fragment,{children:[!(p!=null&&p())&&(0,P.jsx)("div",{ref:T}),R&&(0,P.jsx)(y,{})]})}},87695:function(e,t,n){"use strict";n.r(t)},91518:function(e,t,n){"use strict";n.r(t)},3687:function(e,t,n){"use strict";n.r(t)},20941:function(e,t,n){"use strict";n.r(t),n.d(t,{texts:function(){return a}});var _=n(99735);const a=[]},6458:function(e,t){"use strict";t.Z=`import "./style.scss"
import React, { FC, MouseEventHandler } from "react";
import classNames from "classnames";

export type ButtonProps = {
  children?: React.ReactNode
  /**
   * block \u6309\u94AE\u5BBD\u9AD8\u81EA\u9002\u5E94
   */
  block?: boolean
  /**
   * \u989C\u8272
   */
  color?: 'default' | 'primary' | 'success' | 'warning' | 'danger'
  /**
   * \u662F\u5426\u5371\u9669\u6309\u94AE\uFF0C\u4F1A\u4F7F\u7528 danger \u7684\u989C\u8272
   */
  danger?: boolean
  /**
   * \u662F\u5426\u7981\u7528
   */
  disabled?: boolean
  /**
   * \u5E7D\u7075\u6309\u94AE
   */
  ghost?: boolean
  type?: 'primary' | 'dashed' | 'link' | 'text' | 'default'
  className?: string,
  style?: React.CSSProperties
  icon?: React.ReactNode
  iconPosition?: 'start' | 'end'
  loading?: boolean
  variant?: 'outlined' | 'dashed' | 'solid' | 'filled' | 'text' | 'link',
  onClick?: MouseEventHandler<HTMLButtonElement>
}


export const Button: FC<ButtonProps> = (
  {
    children,
    block = false,
    type = 'default',
    color,
    danger = false,
    disabled,
    className,
    style,
    icon,
    iconPosition = 'start',
    loading,
    variant,
    onClick,
    ...props
  }
) => {
  const clsPrefix = "triones-antm-button"
  let finalColor = color
  let finalVariant = variant
  if (type) {
    if (!color) {
      if (type === 'primary' || type === 'link') {
        finalColor = 'primary'
      } else if (type === 'default') {
        finalColor = 'default'
      }
    }
    if (!variant) {
      if (type === 'primary') {
        finalVariant = 'solid'
      } else if (type === 'default') {
        finalVariant = 'outlined'
      } else if (type === 'dashed' || type === 'link' || type === 'text') {
        finalVariant = type
      }
    }

  }
  if (danger) {
    finalColor = 'danger'
  }
  return <button
    onClick={onClick}
    className={classNames(clsPrefix,
      {
        [\`\${clsPrefix}-block\`]: block,
        [\`\${clsPrefix}-type-\${type}\`]: type,
        [\`\${clsPrefix}-color-\${finalColor}\`]: finalColor,
        [\`\${clsPrefix}-variant-\${finalVariant}\`]: finalVariant,

      })}
    disabled={disabled}>
    {iconPosition == 'start' && icon}
    {children}
    {iconPosition == 'end' && icon}
  </button>
}
`},77306:function(e,t){"use strict";t.Z=`import {Button, ButtonProps} from "./button";

export type {ButtonProps}
export default Button
`},21791:function(e,t){"use strict";t.Z=`.demoBlock {
  font-size: 14px;
  margin-bottom: 12px;
  &:last-of-type {
    padding-bottom: 32px;
  }
  scrollbar-width: thin;
}

.demoTitle {
  padding: 12px 12px 8px;
  color: #697b8c;
  font-size: 14px;
  background: #fafbfc;
}

.demoMain {
  border-right: none;
  border-left: none;
}
`},7761:function(e,t){"use strict";t.Z=`import React from 'react'
import type { FC, ReactNode } from 'react'
import './index.scss'

interface Props {
  title: string
  padding?: string
  background?: string
  children?: ReactNode
}

export const DemoBlock: FC<Props> = props => {
  return (
    <div className='demoBlock'>
      <div className='demoTitle'>{props.title}</div>
      <div
        className='demoMain'
        style={{
          padding: '12px 12px',
          background: '#ffffff',
        }}
      >
        {props.children}
      </div>
    </div>
  )
}
`},26107:function(e,t){"use strict";t.Z=`import {DemoBlock} from '../../DemoBlock';
import React, {useEffect} from 'react';
import Button from "../../Button";
import Popup from "../index";

export default () => {
  const [topOpen, setTopOpen] = React.useState(false);
  const [bottomOpen, setBottomOpen] = React.useState(false);
  const [leftOpen, setLeftOpen] = React.useState(false);
  const [rightOpen, setRightOpen] = React.useState(false);

  useEffect(() => {
    console.log("topOpen", topOpen)
  }, [topOpen])
  return (
    <>
      <DemoBlock title="\u57FA\u7840\u7528\u6CD5">
        <Popup open={topOpen} destroyOnClose={true} afterOpenChange={(o) => {
          setTopOpen(o);
        }}>
          <div style={{minHeight: "200px"}}>
            \u9876\u90E8\u5F39\u51FA
          </div>
        </Popup>
        <Button block={true} onClick={() => {
          setTopOpen(true)
        }}>\u9876\u90E8\u5F39\u51FA</Button>

        <Popup open={bottomOpen} position={\`bottom\`} closable={true} afterOpenChange={(o) => {
          setBottomOpen(o);
        }}>
          <div style={{minHeight: "200px"}}>
            \u5E95\u90E8\u5F39\u51FA
          </div>
        </Popup>
        <Button block={true} onClick={() => {
          setBottomOpen(true)
        }}>\u5E95\u90E8\u5F39\u51FA</Button>

        <Popup open={leftOpen} position={\`left\`} afterOpenChange={(o) => {
          setLeftOpen(o);
        }}>
          <div style={{minWidth: "200px"}}>
            \u5DE6\u90E8\u5F39\u51FA
          </div>
        </Popup>
        <Button block={true} onClick={() => {
          setLeftOpen(true)
        }}>\u5DE6\u90E8\u5F39\u51FA</Button>
        <Popup open={rightOpen} position={\`right\`} afterOpenChange={(o) => {
          setRightOpen(o);
        }}>
          <div style={{minWidth: "200px"}}>
            \u53F3\u90E8\u5F39\u51FA
          </div>
        </Popup>
        <Button block={true} onClick={() => {
          setRightOpen(true)
        }}>\u53F3\u90E8\u5F39\u51FA</Button>
      </DemoBlock>
    </>
  );
};
`},81891:function(e,t){"use strict";t.Z=`import {Popup,PopupProps} from "./popup";

export type {PopupProps}
export default Popup;
`},67353:function(e,t){"use strict";t.Z=`import React, {CSSProperties, FC, PropsWithChildren, useEffect} from "react";
import classNames from "classnames";
import "./style.scss"
import {CloseOutline} from "@trionesdev/antd-taro-icons-react";

const popupCls = "triones-antm-popup";

export type Position = "top" | "bottom" | "left" | "right";


export type PopupModalProps = {
  /**
   * @description \u6837\u5F0F
   * @default horizontal
   */
  styles?: {
    body?: CSSProperties;
  }
  /**
   * @description Modal \u5B8C\u5168\u5173\u95ED\u540E\u7684\u56DE\u8C03
   * @default
   */
  afterClose?: () => void;
  /**
   * @description \u662F\u5426\u6253\u5F00
   * @default false
   */
  open?: boolean,
  /**
   * @description \u6253\u5F00\u4F4D\u7F6E
   * @default bottom
   */
  position?: Position
  /**
   * @description \u662F\u5426\u53EF\u4EE5\u5173\u95ED(\u663E\u793A\u5173\u95ED\u6309\u94AE)
   * @default false
   */
  closable?: boolean
  /**
   * @description \u662F\u5426\u8499\u5C42\u5173\u95ED
   * @default true
   */
  maskClosable?: boolean
  /**
   * @description \u5173\u95ED\u65F6\u9500\u6BC1 Modal \u91CC\u7684\u5B50\u5143\u7D20
   * @default false
   */
  destroyOnClose?: boolean
  /**
   * @description \u8BBE\u7F6E Modal \u7684 z-index
   * @default 1000
   */
  zIndex?: number;
  /**
   * @description \u6253\u5F00\u548C\u5173\u95ED Modal \u65F6\u52A8\u753B\u7ED3\u675F\u540E\u7684\u56DE\u8C03
   * @default
   */
  afterOpenChange?: (open: boolean) => void;
  onDestroy?: () => void;

}

export const PopupModal: FC<PropsWithChildren<PopupModalProps>> = ({
                                                                     children,
                                                                     styles,
                                                                     afterClose,
                                                                     open,
                                                                     position = 'bottom',
                                                                     closable = false,
                                                                     maskClosable = true,
                                                                     destroyOnClose = false,
                                                                     zIndex = 1000,
                                                                     afterOpenChange,
                                                                     onDestroy
                                                                   }) => {
  const [internalOpen, setInternalOpen] = React.useState<boolean>(open || false);
  const handleClose = () => {
    setInternalOpen(false);
    afterClose?.()
  }

  useEffect(() => {
    afterOpenChange?.(internalOpen!);
    if (!internalOpen) {
      if (destroyOnClose) {
        onDestroy?.()
      }
    }
  }, [internalOpen]);

  useEffect(() => {
    if (open == undefined) {
      return
    }
    if (open == internalOpen) {
      return;
    }
    setInternalOpen(open);
  }, [open]);

  return <div className={classNames(popupCls)} style={{zIndex, display: internalOpen ? 'block' : 'none'}}>
    <div className={classNames(\`\${popupCls}-mask\`)} onClick={() => {
      if (maskClosable) {
        handleClose();
      }
    }}></div>
    <div className={classNames(\`\${popupCls}-body\`, \`\${popupCls}-\${position}\`)} style={styles?.body}>
      {closable && <>
        <CloseOutline className={classNames(\`\${popupCls}-close\`)} onClick={() => {
          handleClose()
        }}/>
      </>}
      {children}
    </div>
  </div>
}
`},30226:function(e,t){"use strict";t.Z=`import React, {FC, PropsWithChildren, useEffect} from "react";
import {createPortal} from "react-dom";
import {PopupModal, PopupModalProps} from "./popup-modal";


export type PopupProps = Omit<PopupModalProps, 'onDestroy'> & {
  /**
   * @description \u83B7\u53D6\u5BB9\u5668
   * @default null
   */
  getContainer?: () => HTMLElement,
}
export const Popup: FC<PropsWithChildren<PopupProps>> = ({
                                                           children,
                                                           getContainer,
                                                           open = false,
                                                           ...rest
                                                         }) => {
  const [renderEnable, setRenderEnable] = React.useState(false);
  const containerRef = React.useRef<HTMLDivElement>(null);
  const mountRef = React.useRef<HTMLDivElement | null>(null);
  const rootContainer = getContainer?.() || containerRef.current!;

  const Portal = () => {
    if (!mountRef.current) {
      mountRef.current = document.createElement("div");
      rootContainer.appendChild(mountRef.current);
    }

    const destroy = () => {
      if (rootContainer && mountRef.current) {
        rootContainer.removeChild(mountRef.current);
      }
      mountRef.current = null;
      setRenderEnable(false);
    }

    return <>{createPortal(<PopupModal {...rest} onDestroy={destroy}
                                       open={open}>{children}</PopupModal>, mountRef.current!)}</>

  }

  useEffect(() => {
    if (open && !renderEnable) {
      setRenderEnable(true);
    }
  }, [open]);


  return <>
    {!getContainer?.() && <div ref={containerRef}></div>}
    {renderEnable && <Portal/>}</>;
}
`},98092:function(e,t){"use strict";t.Z=`$popupCls: 'triones-antm-popup';

.#{$popupCls} {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;

  &-mask {
    height: 100%;
    width: 100%;
    background-color: rgba(0, 0, 0, .55);
  }

  &-close {
    position: absolute;
    right: 10Px;
    top: 10Px;
  }

  &-body {
    background-color: white;

    position: fixed;
  }

  &-top {
    top: 0;
    left: 0;
    right: 0;
  }

  &-bottom {
    bottom: 0;
    left: 0;
    right: 0;
  }

  &-left {
    left: 0;
    top: 0;
    bottom: 0;
  }

  &-right {
    right: 0;
    top: 0;
    bottom: 0;
  }
}
`},84176:function(e,t,n){var _=n(75863);function a(o,l){if(o==null)return{};var i=_(o,l),m,d;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(o);for(d=0;d<f.length;d++)m=f[d],!(l.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(o,m)&&(i[m]=o[m])}return i}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},75863:function(e){function t(n,_){if(n==null)return{};var a={},o=Object.keys(n),l,i;for(i=0;i<o.length;i++)l=o[i],!(_.indexOf(l)>=0)&&(a[l]=n[l]);return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}}]);
