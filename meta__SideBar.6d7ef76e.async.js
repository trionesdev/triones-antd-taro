"use strict";(self.webpackChunk_trionesdev_antd_taro_react=self.webpackChunk_trionesdev_antd_taro_react||[]).push([[5214],{69244:function(d,e,n){n.r(e);var u=n(43842),E=n.n(u),v={};for(var f in u)f!=="default"&&(v[f]=function(_){return u[_]}.bind(0,f));n.d(e,v)},35365:function(d,e,n){var u;n.r(e),n.d(e,{demos:function(){return I}});var E=n(90819),v=n.n(E),f=n(89933),_=n.n(f),h=n(44194),F=n(59924),T=n(90052),U=n(95676),W=n(51865),tn=n.n(W),m=n(3837),a=n(38273),L=n(15402),P=n(42195),g=n(81155),s=n(54090),M=n(60396),D=n.n(M),w=n(56508),V=n(69244),I={"sidebar-demo-base":{component:h.memo(h.lazy(function(){return n.e(5527).then(n.bind(n,93917))})),asset:{type:"BLOCK",id:"sidebar-demo-base",refAtomIds:["SideBar"],dependencies:{"index.tsx":{type:"FILE",value:n(2967).Z},react:{type:"NPM",value:"18.3.1"},"../side-bar.tsx":{type:"FILE",value:n(34122).Z},"../../DemoBlock.tsx":{type:"FILE",value:n(23624).Z},classnames:{type:"NPM",value:"2.5.1"},"./index.scss":{type:"FILE",value:n(72973).Z},"@tarojs/extend":{type:"NPM",value:"4.1.2"},"../ScrollView.tsx":{type:"FILE",value:n(16079).Z},"./style.scss":{type:"FILE",value:n(65085).Z},"./SideBarContext.tsx":{type:"FILE",value:n(13605).Z},"../utils/taro-utils.ts":{type:"FILE",value:n(65812).Z},"@tarojs/taro":{type:"NPM",value:"4.0.9"},"./scroll-view.tsx":{type:"FILE",value:n(11630).Z},"@tarojs/components":{type:"NPM",value:"4.0.9"}},entry:"index.tsx"},context:{"../side-bar.tsx":T,"../../DemoBlock.tsx":U,"./index.scss":m,"../ScrollView.tsx":L,"./style.scss":P,"./SideBarContext.tsx":g,"../utils/taro-utils.ts":s,"./scroll-view.tsx":w,react:u||(u=n.t(h,2)),"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/SideBar/side-bar.tsx":T,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.tsx":U,classnames:W,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.scss":m,"@tarojs/extend":a,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/ScrollView/index.tsx":L,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/ScrollView/style.scss":P,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/SideBar/SideBarContext.tsx":g,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/utils/taro-utils.ts":s,"@tarojs/taro":M,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/ScrollView/scroll-view.tsx":w,"@tarojs/components":V},renderOpts:{compile:function(){var j=_()(v()().mark(function i(){var l,C=arguments;return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,n.e(2740).then(n.bind(n,42740));case 2:return c.abrupt("return",(l=c.sent).default.apply(l,C));case 3:case"end":return c.stop()}},i)}));function B(){return j.apply(this,arguments)}return B}()}},"sidebar-demo-scroll-mode":{component:h.memo(h.lazy(function(){return n.e(5527).then(n.bind(n,61370))})),asset:{type:"BLOCK",id:"sidebar-demo-scroll-mode",refAtomIds:["SideBar"],dependencies:{"index.tsx":{type:"FILE",value:n(95846).Z},react:{type:"NPM",value:"18.3.1"},"../side-bar.tsx":{type:"FILE",value:n(34122).Z},"../../DemoBlock.tsx":{type:"FILE",value:n(23624).Z},classnames:{type:"NPM",value:"2.5.1"},"./index.scss":{type:"FILE",value:n(72973).Z},"@tarojs/extend":{type:"NPM",value:"4.1.2"},"./style.scss":{type:"FILE",value:n(65085).Z},"../ScrollView.tsx":{type:"FILE",value:n(16079).Z},"./SideBarContext.tsx":{type:"FILE",value:n(13605).Z},"../utils/taro-utils.ts":{type:"FILE",value:n(65812).Z},"@tarojs/taro":{type:"NPM",value:"4.0.9"},"./scroll-view.tsx":{type:"FILE",value:n(11630).Z},"@tarojs/components":{type:"NPM",value:"4.0.9"}},entry:"index.tsx"},context:{"../side-bar.tsx":T,"../../DemoBlock.tsx":U,"./index.scss":m,"./style.scss":P,"../ScrollView.tsx":L,"./SideBarContext.tsx":g,"../utils/taro-utils.ts":s,"./scroll-view.tsx":w,react:u||(u=n.t(h,2)),"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/SideBar/side-bar.tsx":T,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.tsx":U,classnames:W,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/DemoBlock/index.scss":m,"@tarojs/extend":a,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/ScrollView/style.scss":P,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/ScrollView/index.tsx":L,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/SideBar/SideBarContext.tsx":g,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/utils/taro-utils.ts":s,"@tarojs/taro":M,"/home/runner/work/triones-antd-taro/triones-antd-taro/packages/antd-taro-react/src/ScrollView/scroll-view.tsx":w,"@tarojs/components":V},renderOpts:{compile:function(){var j=_()(v()().mark(function i(){var l,C=arguments;return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,n.e(2740).then(n.bind(n,42740));case 2:return c.abrupt("return",(l=c.sent).default.apply(l,C));case 3:case"end":return c.stop()}},i)}));function B(){return j.apply(this,arguments)}return B}()}}}},95676:function(d,e,n){n.r(e),n.d(e,{DemoBlock:function(){return f}});var u=n(44194),E=n(3837),v=n(31549),f=function(h){return(0,v.jsxs)("div",{className:"demoBlock",children:[(0,v.jsx)("div",{className:"demoTitle",children:h.title}),(0,v.jsx)("div",{className:"demoMain",style:{padding:"12px 12px",background:"#ffffff"},children:h.children})]})}},15402:function(d,e,n){n.r(e);var u=n(56508);e.default=u.ScrollView},56508:function(d,e,n){n.r(e),n.d(e,{ScrollView:function(){return tn}});var u=n(10154),E=n.n(u),v=n(43842),f=n.n(v),_=n(51865),h=n.n(_),F=n(44194),T=n(54090),U=n(42195),W=n(31549),tn=(0,F.forwardRef)(function(m,a){var L=m.className,P=m.style,g=m.children,s=m.onScroll,M=m.showScrollbar,D=M===void 0?!0:M,w=m.scrollX,V=m.scrollY,I=m.scrollTop,j=(0,T.checkTaroEnv)(),B=(0,F.useRef)(),i=function(r){B.current=r,a&&(typeof a=="function"?a(r):a.current=r)};(0,F.useEffect)(function(){console.log("scrollTop",I),I!==void 0&&(j||B.current.scrollTo({top:I,behavior:"smooth"}))},[I]);var l="triones-antm-scroll-view";return j?(0,W.jsx)(v.ScrollView,{ref:i,className:h()(L),style:P,onScroll:function(r){s==null||s({detail:{deltaX:r.detail.deltaX,deltaY:r.detail.deltaY,scrollLeft:r.detail.scrollLeft,scrollTop:r.detail.scrollTop,scrollHeight:r.detail.scrollHeight,scrollWidth:r.detail.scrollWidth}})},showScrollbar:D,scrollX:w,scrollY:V,scrollTop:I,children:g}):(0,W.jsx)("div",{ref:i,className:h()("".concat(l),L,E()(E()(E()({},"".concat(l,"-scroll-x"),w),"".concat(l,"-scroll-y"),V),"".concat(l,"-scroll-bar-hidden"),!D)),style:P,onScroll:function(r){s==null||s({detail:{scrollLeft:r.target.scrollLeft,scrollTop:r.target.scrollTop,scrollHeight:r.target.scrollHeight,scrollWidth:r.target.scrollWidth}})},children:g})})},81155:function(d,e,n){n.r(e),n.d(e,{SideBarContext:function(){return E}});var u=n(44194),E=(0,u.createContext)({})},90052:function(d,e,n){n.r(e),n.d(e,{SideBar:function(){return j}});var u=n(73193),E=n.n(u),v=n(90819),f=n.n(v),_=n(89933),h=n.n(_),F=n(45332),T=n.n(F),U=n(10154),W=n.n(U),tn=n(51865),m=n.n(tn),a=n(44194),L=n(15402),P=n(54090),g=n(81155),s=n(31549),M=n(38273),D="triones-antm-sidebar",w=function(i){var l=i.tabKey,C=i.title,r=(0,a.useContext)(g.SideBarContext),c=r.activeKey,k=r.setActiveKey,A=(0,a.useRef)();return(0,s.jsx)("div",{ref:A,className:m()("".concat(D,"-tab"),W()({},"".concat(D,"-tab-active"),c===l)),onClick:function(){k==null||k(l)},children:C})},V=(0,a.memo)(function(B){var i,l=B.tabKey,C=B.content,r=(0,P.checkTaroEnv)(),c=(0,a.useState)(!1),k=T()(c,2),A=k[0],J=k[1],x=(0,a.useRef)(),Z=(0,a.useRef)(),b=(0,a.useContext)(g.SideBarContext),X=b.activeKey,Q=b.mode,Y=b.activeChangeCallback,H=b.onMoveToTab,q=b.scrollDetail,on=b.asyncRender,z=b.contentEl,an=b.contentWheelEl,rn=b.manual,sn=function(){var K=h()(f()().mark(function S(){var o,O;return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,an.offset();case 3:return o=t.sent,t.next=6,M.$(x.current).offset();case 6:return O=t.sent,t.abrupt("return",O.top-o.top);case 10:return t.abrupt("return",x.current.offsetTop);case 11:case"end":return t.stop()}},S)}));return function(){return K.apply(this,arguments)}}(),nn=function(){var K=h()(f()().mark(function S(){var o,O;return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,z.offset();case 3:return o=t.sent,t.next=6,M.$(x.current).offset();case 6:return O=t.sent,t.abrupt("return",O.top-(o==null?void 0:o.top));case 10:return t.abrupt("return",x.current.offsetTop-Math.abs(q.top));case 11:case"end":return t.stop()}},S)}));return function(){return K.apply(this,arguments)}}(),G=function(){var K=h()(f()().mark(function S(){var o,O;return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}return t.next=3,z.offset();case 3:return o=t.sent,t.next=6,M.$(x.current).offset();case 6:return O=t.sent,t.abrupt("return",O.top+O.height-(o==null?void 0:o.top));case 10:return t.abrupt("return",x.current.offsetTop+x.current.offsetHeight-Math.abs(q.top));case 11:case"end":return t.stop()}},S)}));return function(){return K.apply(this,arguments)}}();return(0,a.useEffect)(function(){X===l&&(J(!0),Q==="scroll"&&!rn&&Promise.all([]).then(h()(f()().mark(function K(){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!r||r&&an)){o.next=8;break}if(o.t0=Y==null,o.t0){o.next=8;break}return o.t1=Y,o.next=6,sn();case 6:o.t2=o.sent,(0,o.t1)(o.t2);case 8:case"end":return o.stop()}},K)}))))},[X]),(0,a.useEffect)(function(){Q==="scroll"&&rn&&(Z.current&&cancelAnimationFrame(Z.current),Z.current=requestAnimationFrame(h()(f()().mark(function K(){var S,o;return f()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(X===l){R.next=8;break}return R.next=3,nn();case 3:return S=R.sent,R.next=6,G();case 6:o=R.sent,(-50<=S&&S<=0||0<=o&&o<=50)&&(H==null||H(l));case 8:case"end":return R.stop()}},K)}))))},[q]),(0,s.jsx)("div",{ref:x,id:(i=x.current)===null||i===void 0?void 0:i.uid,className:m()("".concat(D,"-content-item"),W()({},"".concat(D,"-content-item-active"),X===l)),children:on?A&&C:C})}),I=(0,a.memo)(function(B){var i=B.items;return(0,s.jsx)(s.Fragment,{children:i.map(function(l,C){return(0,s.jsx)(V,{tabKey:l.tabKey,content:l.content},"".concat(l.tabKey,"-content"))})})}),j=function(i){var l=i.activeKey,C=i.defaultActiveKey,r=i.items,c=r===void 0?[]:r,k=i.mode,A=k===void 0?"switch":k,J=i.asyncRender,x=J===void 0?!1:J,Z=i.tabWidth,b=Z===void 0?100:Z,X=(0,P.checkTaroEnv)(),Q=(0,a.useRef)(),Y=(0,a.useRef)(),H=(0,a.useRef)(),q=(0,a.useState)([]),on=T()(q,2),z=on[0],an=on[1],rn=(0,a.useState)(l||C),sn=T()(rn,2),nn=sn[0],G=sn[1],K=(0,a.useState)(),S=T()(K,2),o=S[0],O=S[1],R=(0,a.useState)(),t=T()(R,2),fn=t[0],mn=t[1],vn=(0,a.useState)(!1),cn=T()(vn,2),en=cn[0],N=cn[1],hn=(0,a.useState)({top:0}),dn=T()(hn,2),$=dn[0],ln=dn[1],pn=(0,a.useMemo)(function(){return X?$.top:$.manual?0:$.top},[$==null?void 0:$.top]),yn=function(y){A==="scroll"&&!en&&ln({manual:en,top:y})},un=function(y){G(y)};return(0,a.useEffect)(function(){if(an(c==null?void 0:c.map(function(y){return{tabKey:y.key,title:y.title,content:y.content}})),!nn){var p;G(c==null||(p=c[0])===null||p===void 0?void 0:p.key)}},[c]),(0,a.useEffect)(function(){l!==void 0&&G(l)},[l]),(0,a.useEffect)(function(){if(A==="scroll")return O(M.$(Q.current)),mn(M.$(Y.current)),function(){H.current&&cancelAnimationFrame(H.current)}},[]),(0,s.jsx)(g.SideBarContext.Provider,{value:{activeKey:nn,setActiveKey:G,mode:A,scrollDetail:$,setScrollDetail:ln,contentEl:o,contentWheelEl:fn,activeChangeCallback:yn,asyncRender:x,onMoveToTab:un,manual:en,setManul:N},children:(0,s.jsxs)("div",{className:m()("".concat(D),"".concat(D,"-").concat(A,"-mode")),children:[(0,s.jsx)("div",{className:m()("".concat(D,"-tabs")),style:{width:b},children:z.map(function(p,y){return(0,s.jsx)(w,E()(E()({},p),{},{tabKey:p.tabKey,activeKey:nn,onActiveChange:un}),"".concat(p.tabKey,"-tab"))})}),(0,s.jsxs)("div",{ref:Q,className:m()("".concat(D,"-content")),onTouchStart:function(y){N(!0)},onTouchEnd:function(y){N(!1)},onMouseEnter:function(y){N(!0)},onMouseLeave:function(y){N(!1)},onMouseOut:function(y){N(!1)},onMouseOver:function(y){N(!0)},onMouseMove:function(y){N(!0)},children:[A==="scroll"&&(0,s.jsx)(L.default,{style:{height:"100%"},scrollY:!0,scrollTop:pn,onScroll:function(y){en&&ln({manual:en,top:y.detail.scrollTop})},children:(0,s.jsx)("div",{ref:Y,children:(0,s.jsx)(I,{items:z})})}),A==="switch"&&(0,s.jsx)("div",{children:(0,s.jsx)(I,{items:z})})]})]})})}},54090:function(d,e,n){n.r(e),n.d(e,{checkTaroEnv:function(){return v}});var u=n(60396),E=n.n(u),v=function(){var _=E().getEnv();return console.log("env",_),_&&(_==null?void 0:_.toString())!=="Unknown"}},3837:function(d,e,n){n.r(e)},42195:function(d,e,n){n.r(e)},58696:function(d,e,n){n.r(e),n.d(e,{texts:function(){return E}});var u=n(59924);const E=[]},72973:function(d,e){e.Z=`.demoBlock {
  font-size: 14px;
  margin-bottom: 12px;
  &:last-of-type {
    padding-bottom: 32px;
  }
  scrollbar-width: thin;
}

.demoTitle {
  padding: 12px 12px 8px;
  color: #697b8c;
  font-size: 14px;
  background: #fafbfc;
}

.demoMain {
  border-right: none;
  border-left: none;
}
`},23624:function(d,e){e.Z=`import React from 'react'
import type { FC, ReactNode } from 'react'
import './index.scss'

interface Props {
  title: string
  padding?: string
  background?: string
  children?: ReactNode
}

export const DemoBlock: FC<Props> = props => {
  return (
    <div className='demoBlock'>
      <div className='demoTitle'>{props.title}</div>
      <div
        className='demoMain'
        style={{
          padding: '12px 12px',
          background: '#ffffff',
        }}
      >
        {props.children}
      </div>
    </div>
  )
}
`},16079:function(d,e){e.Z=`import {ScrollView,ScrollViewProps} from "./scroll-view"

export type {ScrollViewProps}

export default ScrollView
`},11630:function(d,e){e.Z=`import { ScrollView as TaroScrollView } from '@tarojs/components';
import classNames from 'classnames';
import React, {
  FC,
  ForwardedRef,
  forwardRef,
  ReactNode,
  useEffect,
  useRef,
} from 'react';
import { checkTaroEnv } from '../utils/taro-utils';
import './style.scss';

export type ScrollEvent = {
  target?: any;
  detail: {
    deltaX?: number;
    deltaY?: number;
    scrollLeft?: number;
    scrollTop?: number;
    scrollHeight?: number;
    scrollWidth?: number;
  };
};

export type ScrollViewProps = {
  className?: string;
  style?: React.CSSProperties;
  children?: ReactNode;
  onScroll?: (e: ScrollEvent) => void;
  showScrollbar?: boolean;
  scrollX?: boolean;
  scrollY?: boolean;
  scrollTop?: number;
};

export const ScrollView: FC<ScrollViewProps> = forwardRef(
  (
    {
      className,
      style,
      children,
      onScroll,
      showScrollbar = true,
      scrollX,
      scrollY,
      scrollTop,
    },
    ref: ForwardedRef<any>,
  ) => {
    const isTaroEnv = checkTaroEnv();
    const scrollRef = useRef<any>();
    const handleRef = (node: any) => {
      scrollRef.current = node;
      if (ref) {
        if (typeof ref === 'function') {
          ref(node);
        } else {
          ref.current = node;
        }
      }
    };

    useEffect(() => {
      console.log('scrollTop', scrollTop);
      if (scrollTop !== undefined) {
        if (!isTaroEnv) {
          scrollRef.current.scrollTo({
            top: scrollTop,
            behavior: 'smooth',
          });
        }
      }
    }, [scrollTop]);

    const trionesScrollViewCls = 'triones-antm-scroll-view';

    if (isTaroEnv) {
      return (
        <TaroScrollView
          ref={handleRef}
          className={classNames(className)}
          style={style}
          onScroll={(e) => {
            onScroll?.({
              detail: {
                deltaX: e.detail.deltaX,
                deltaY: e.detail.deltaY,
                scrollLeft: e.detail.scrollLeft,
                scrollTop: e.detail.scrollTop,
                scrollHeight: e.detail.scrollHeight,
                scrollWidth: e.detail.scrollWidth,
              },
            });
          }}
          showScrollbar={showScrollbar}
          scrollX={scrollX}
          scrollY={scrollY}
          scrollTop={scrollTop}
        >
          {children}
        </TaroScrollView>
      );
    } else {
      return (
        <div
          ref={handleRef}
          className={classNames(\`\${trionesScrollViewCls}\`, className, {
            [\`\${trionesScrollViewCls}-scroll-x\`]: scrollX,
            [\`\${trionesScrollViewCls}-scroll-y\`]: scrollY,
            [\`\${trionesScrollViewCls}-scroll-bar-hidden\`]: !showScrollbar,
          })}
          style={style}
          onScroll={(e: any) => {
            // console.log(e);
            onScroll?.({
              detail: {
                scrollLeft: e.target.scrollLeft,
                scrollTop: e.target.scrollTop,
                scrollHeight: e.target.scrollHeight,
                scrollWidth: e.target.scrollWidth,
              },
            });
          }}
        >
          {children}
        </div>
      );
    }
  },
);
`},65085:function(d,e){e.Z=`$trionesScrollViewCls: 'triones-antm-scroll-view';

.#{$trionesScrollViewCls} {
  scrollbar-width: thin;

  &-scroll-x {
    overflow-x: auto;
    overflow-y: hidden;
  }

  &-scroll-y {
    overflow-x: hidden;
    overflow-y: auto;
  }

  &-scroll-bar-hidden {
    scrollbar-width: none;
  }
}
`},13605:function(d,e){e.Z=`import { createContext } from 'react';
import { ScrollDetail } from './types';

type SideBarContextType = {
  activeKey?: string;
  setActiveKey?: (key: string) => void;
  mode?: 'switch' | 'scroll';
  scrollDetail?:ScrollDetail,
  setScrollDetail?: (detail: ScrollDetail) => void;
  activeChangeCallback?: (targetScrollTop: number) => void;
  onMoveToTab?: (activeKey: string) => void;
  asyncRender?: boolean;
  contentEl?: any;
  contentWheelEl?: any;

  manual?:boolean
  setManul?:(manual:boolean)=>void

};
export const SideBarContext = createContext<SideBarContextType>({});
`},2967:function(d,e){e.Z=`import React from 'react';
import { DemoBlock } from '../../DemoBlock';
import { SideBar } from '../side-bar';

export default () => {
  return (
    <DemoBlock title={\`\u57FA\u672C\u4F7F\u7528\`}>
      <div style={{ height: 300 }}>
        <SideBar
          items={[
            { key: '1', title: 'Tab 1', content: <div style={{height: 200}}>Tab 1 Content</div> },
            { key: '2', title: 'Tab 2', content: <div style={{height: 200}}>Tab 2 Content</div> },
            { key: '3', title: 'Tab 3', content: <div style={{height: 200}}>Tab 3 Content</div> },
            { key: '4', title: 'Tab 4', content: <div style={{height: 200}}>Tab 4 Content</div> },
            { key: '5', title: 'Tab 5', content: <div style={{height: 200}}>Tab 5 Content</div> },
          ]}
        />
      </div>
    </DemoBlock>
  );
};
`},95846:function(d,e){e.Z=`import React from 'react';
import { DemoBlock } from '../../DemoBlock';
import { SideBar } from '../side-bar';

export default () => {
  return (
    <DemoBlock title={\`\u57FA\u672C\u4F7F\u7528\`}>
      <div style={{ height: 300 }}>
        <SideBar mode={'scroll'}
          items={[
            { key: '1', title: 'Tab 1', content: <div style={{height: 400}}>Tab 1 Content</div> },
            { key: '2', title: 'Tab 2', content: <div style={{height: 500}}>Tab 2 Content</div> },
            { key: '3', title: 'Tab 3', content: <div style={{height: 300}}>Tab 3 Content</div> },
            { key: '4', title: 'Tab 4', content: <div style={{height: 600}}>Tab 4 Content</div> },
            { key: '5', title: 'Tab 5', content: <div style={{height: 700}}>Tab 5 Content</div> },
          ]}
        />
      </div>
    </DemoBlock>
  );
};
`},34122:function(d,e){e.Z=`import classNames from 'classnames';
import React, {
  FC,
  memo,
  useContext,
  useEffect,
  useMemo,
  useRef,
  useState,
} from 'react';
import ScrollView from '../ScrollView';
import { checkTaroEnv } from '../utils/taro-utils';
import { SideBarContext } from './SideBarContext';
import './style.scss';

const taroExtend = require('@tarojs/extend');

const sideBarCls = 'triones-antm-sidebar';

type sideBarMode = 'switch' | 'scroll';

type ScrollDetail = {
  /**
   * \u662F\u5426\u662F\u4EBA\u4E3A\u6EDA\u52A8
   */
  manual?: boolean;
  top?: number;
};

type SideBarTabProps = {
  tabKey: string;
  title?: string;
};
const SideBarTab: FC<SideBarTabProps> = ({
  tabKey,

  title,
}) => {
  const { activeKey, setActiveKey } = useContext(SideBarContext);
  const tabRef = useRef<any>();

  return (
    <div
      ref={tabRef}
      className={classNames(\`\${sideBarCls}-tab\`, {
        [\`\${sideBarCls}-tab-active\`]: activeKey === tabKey,
      })}
      onClick={() => {
        setActiveKey?.(tabKey);
      }}
    >
      {title}
    </div>
  );
};

type SideBarContentProps = {
  tabKey: string;
  content?: React.ReactNode;
};

const SideBarContent: FC<SideBarContentProps> = memo(({ tabKey, content }) => {
  const isTaroEnv = checkTaroEnv();
  const [rendered, setRendered] = useState(false);
  const contentItemRef = useRef<any>();
  const frameRef = useRef<any>();
  const {
    activeKey,
    mode,
    activeChangeCallback,
    onMoveToTab,
    scrollDetail,
    asyncRender,
    contentEl,
    contentWheelEl,
    manual,
  } = useContext(SideBarContext);

  const computeContentOffsetTop = async (): Promise<number> => {
    if (isTaroEnv) {
      const contentWheelOffset = await contentWheelEl.offset();
      const itemOffset = await taroExtend.$(contentItemRef.current).offset();
      return itemOffset.top - contentWheelOffset!.top;
    } else {
      return contentItemRef.current.offsetTop;
    }
  };

  /**
   * \u8BA1\u7B97\u5F53\u524D\u9875\u9876\u90E8\uFF0C\u8DDD\u79BB\u53EF\u6EDA\u52A8\u533A\u57DF\u9876\u90E8\u7684\u8DDD\u79BB
   */
  const computeReactiveOffsetTop = async () => {
    if (isTaroEnv) {
      const contentOffset = await contentEl.offset();
      const itemOffset = await taroExtend.$(contentItemRef.current).offset();
      return itemOffset.top - contentOffset?.top;
    } else {
      return contentItemRef.current.offsetTop - Math.abs(scrollDetail!.top!);
    }
  };

  /**
   * \u8BA1\u7B97\u5F53\u524D\u9875\u5E95\u90E8\uFF0C\u8DDD\u79BB\u53EF\u6EDA\u52A8\u533A\u57DF\u9876\u90E8\u7684\u8DDD\u79BB
   */
  const computeReactiveOffsetBottom = async () => {
    if (isTaroEnv) {
      const contentOffset = await contentEl.offset();
      const itemOffset = await taroExtend.$(contentItemRef.current).offset();
      return itemOffset.top + itemOffset.height - contentOffset?.top;
    } else {
      return (
        contentItemRef.current.offsetTop +
        contentItemRef.current.offsetHeight -
        Math.abs(scrollDetail!.top!)
      );
    }
  };

  useEffect(() => {
    if (activeKey === tabKey) {
      setRendered(true);
      if (mode === 'scroll' && !manual) {
        Promise.all([]).then(async () => {
          if (!isTaroEnv || (isTaroEnv && contentWheelEl)) {
            activeChangeCallback?.(await computeContentOffsetTop());
          }
        });
      }
    }
  }, [activeKey]);

  /**
   * \u76D1\u542C\u6EDA\u52A8\u53D8\u5316\uFF0C\u53EA\u6709\u5728\u4EBA\u4E3A\u64CD\u4F5C\u7684\u65F6\u5019\u624D\u76D1\u542C\u6EDA\u52A8\u7684\u4F4D\u7F6E\u662F\u5426\u9700\u8981\u5207\u6362tab\uFF0C\u5982\u679C\u662F\u5207\u6362tab \u5F15\u53D1\u7684\u6EDA\u52A8\u5219\u4E0D\u6267\u884C
   */
  useEffect(() => {
    // return;
    if (mode === 'scroll' && manual) {
      if (frameRef.current) {
        cancelAnimationFrame(frameRef.current);
      }
      frameRef.current = requestAnimationFrame(async () => {
        if (activeKey !== tabKey) {
          const reactiveOffsetTop = await computeReactiveOffsetTop(); //\u5F53\u524D\u9876\u90E8\u76F8\u5BF9\u4E8E\u7236\u5BB9\u5668\u9876\u90E8\u7684\u504F\u79FB\u91CF
          const reactiveOffsetBottom = await computeReactiveOffsetBottom();
          if (
            (-50 <= reactiveOffsetTop && reactiveOffsetTop <= 0) ||
            (0 <= reactiveOffsetBottom && reactiveOffsetBottom <= 50)
          ) {
            onMoveToTab?.(tabKey);
          }
        }
      });
    }
  }, [scrollDetail]);

  return (
    <div
      ref={contentItemRef}
      id={contentItemRef.current?.uid}
      className={classNames(\`\${sideBarCls}-content-item\`, {
        [\`\${sideBarCls}-content-item-active\`]: activeKey === tabKey,
      })}
    >
      {asyncRender ? rendered && content : content}
    </div>
  );
});

type SideBarContentsProps = {
  items: any[];
};

const SideBarContents: FC<SideBarContentsProps> = memo(({ items }) => {
  return (
    <>
      {items.map((item, index) => (
        <SideBarContent
          key={\`\${item.tabKey}-content\`}
          tabKey={item.tabKey}
          content={item.content}
          // activeChangeCallback={handleSelectScroll}
        />
      ))}
    </>
  );
});

export type SideBarItemProps = {
  key: string;
  title?: string;
  content?: React.ReactNode;
};
export type SideBarProps = {
  activeKey?: string;
  defaultActiveKey?: string;
  items?: SideBarItemProps[];
  /**
   * \u4EA4\u4E92\u6A21\u5F0F \`switch\` \u9875\u9762\u5207\u6362\uFF0C\`scroll\` \u6EDA\u52A8\u5C55\u793A
   */
  mode?: sideBarMode;
  /**
   * @description \u662F\u5426\u5F02\u6B65\u6E32\u67D3\u5185\u5BB9
   * @default false
   */
  asyncRender?: boolean;
  tabWidth?: number;
};
export const SideBar: FC<SideBarProps> = ({
  activeKey,
  defaultActiveKey,
  items = [],
  mode = 'switch',
  asyncRender = false,
  tabWidth = 100,
}) => {
  const isTaroEnv = checkTaroEnv();
  const contentRef = useRef<any>();
  const contentWheelRef = useRef<any>();
  const frameRef = useRef<any>();
  const [internalItems, setInternalItems] = useState<any[]>([]);
  const [internalActiveKey, setInternalActiveKey] = useState<
    string | undefined
  >(activeKey || defaultActiveKey);

  const [contentEl, setContentEl] = useState<any>();
  const [contentWheelEl, setContentWheelEl] = useState<any>();
  const [manual, setManual] = useState(false);

  const [scrollDetail, setScrollDetail] = useState<ScrollDetail>({ top: 0 });

  const scrollTop = useMemo(() => {
    if (isTaroEnv) {
      return scrollDetail.top;
    } else {
      if (!scrollDetail.manual) {
        return scrollDetail.top;
      }
      return 0;
    }
  }, [scrollDetail?.top]);

  const handleSelectScroll = (scrollTop: number) => {
    if (mode === 'scroll' && !manual) {
      setScrollDetail({ manual: manual, top: scrollTop });
    }
  };

  const handleActiveChange = (tabKey: string) => {
    setInternalActiveKey(tabKey);
  };

  useEffect(() => {
    setInternalItems(
      items?.map((item) => {
        return {
          tabKey: item.key,
          title: item.title,
          content: item.content,
        };
      }),
    );
    if (!internalActiveKey) {
      setInternalActiveKey(items?.[0]?.key);
    }
  }, [items]);

  useEffect(() => {
    if (undefined !== activeKey) {
      setInternalActiveKey(activeKey);
    }
  }, [activeKey]);

  useEffect(() => {
    if (mode === 'scroll') {
      setContentEl(taroExtend.$(contentRef.current));
      setContentWheelEl(taroExtend.$(contentWheelRef.current));

      return () => {
        if (frameRef.current) {
          cancelAnimationFrame(frameRef.current);
        }
      };
    }
  }, []);

  return (
    <SideBarContext.Provider
      value={{
        activeKey: internalActiveKey,
        setActiveKey: setInternalActiveKey,
        mode: mode,
        scrollDetail: scrollDetail,
        setScrollDetail: setScrollDetail,
        contentEl: contentEl,
        contentWheelEl: contentWheelEl,
        activeChangeCallback: handleSelectScroll,
        asyncRender: asyncRender,
        onMoveToTab: handleActiveChange,
        manual: manual,
        setManul: setManual,
      }}
    >
      <div
        className={classNames(\`\${sideBarCls}\`, \`\${sideBarCls}-\${mode}-mode\`)}
      >
        <div
          className={classNames(\`\${sideBarCls}-tabs\`)}
          style={{ width: tabWidth }}
        >
          {internalItems.map((item, index) => (
            <SideBarTab
              key={\`\${item.tabKey}-tab\`}
              {...item}
              tabKey={item.tabKey}
              activeKey={internalActiveKey}
              onActiveChange={handleActiveChange}
            />
          ))}
        </div>
        <div
          ref={contentRef}
          className={classNames(\`\${sideBarCls}-content\`)}
          onTouchStart={(e) => {
            setManual(true);
          }}
          onTouchEnd={(e) => {
            setManual(false);
          }}
          onMouseEnter={(e) => {
            setManual(true);
          }}
          onMouseLeave={(e) => {
            setManual(false);
          }}
          onMouseOut={(e) => {
            setManual(false);
          }}
          onMouseOver={(e) => {
            setManual(true);
          }}
          onMouseMove={(e) => {
            setManual(true);
          }}
        >
          {mode === 'scroll' && (
            <ScrollView
              style={{ height: '100%' }}
              scrollY={true}
              scrollTop={scrollTop}
              onScroll={(e) => {
                //\u5982\u679C\u662F\u811A\u672C\u89E6\u53D1\u7684\u6EDA\u52A8\uFF0C\u5219\u4E0D\u5904\u7406,\u907F\u514D\u5728\u6EDA\u52A8\u8FC7\u7A0B\u4E2D\uFF0C\u89E6\u53D1\u6EDA\u52A8\u4E8B\u4EF6\uFF0C\u5BFC\u81F4\u6EDA\u52A8\u505C\u6B62
                if (manual) {
                  setScrollDetail({
                    manual: manual,
                    top: e.detail.scrollTop!,
                  });
                }
              }}
            >
              <div ref={contentWheelRef}>
                <SideBarContents items={internalItems} />
              </div>
            </ScrollView>
          )}
          {mode === 'switch' && (
            <div>
              <SideBarContents items={internalItems} />
            </div>
          )}
        </div>
      </div>
    </SideBarContext.Provider>
  );
};
`},65812:function(d,e){e.Z=`import Taro from '@tarojs/taro'

export const checkTaroEnv = () => {
  const env = Taro.getEnv()
  console.log("env", env)
  return env && "Unknown" !== env?.toString()
}
`}}]);
