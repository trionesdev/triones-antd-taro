"use strict";(self.webpackChunk_trionesdev_antd_taro_react=self.webpackChunk_trionesdev_antd_taro_react||[]).push([[1133],{90956:function(L,l,n){n.r(l),n.d(l,{CascaderColumnItem:function(){return i}});var _=n(10154),d=n.n(_),c=n(44194),D=n(51865),r=n.n(D),O=n(67560),m=n(31549),u="triones-antm-cascader-view",i=function(y){var I=y.option,M=y.onClick,E=y.selected;return(0,m.jsxs)("div",{className:r()("".concat(u,"-column-item"),d()({},"".concat(u,"-column-item-selected"),E)),onClick:function(){M==null||M(I)},children:[(0,m.jsx)("div",{children:I.label}),E&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(O.CheckOutline,{})})]})}},93357:function(L,l,n){n.r(l),n.d(l,{CascaderColumn:function(){return m}});var _=n(44194),d=n(90956),c=n(51865),D=n.n(c),r=n(31549),O="triones-antm-cascader-view",m=function(i){var A=i.index,y=A===void 0?0:A,I=i.options,M=i.value,E=i.labelInValue,t=E===void 0?!1:E,f=i.onSelect,U=function(R){f==null||f(R,y)};return(0,r.jsx)("div",{className:D()("".concat(O,"-column")),children:I.map(function(W,R){return(0,r.jsx)(d.CascaderColumnItem,{option:W,selected:(M==null?void 0:M.value)==W.value,onClick:function(){U(W)}},R)})})}},72733:function(L,l,n){n.r(l),n.d(l,{CascaderView:function(){return W}});var _=n(90819),d=n.n(_),c=n(76711),D=n.n(c),r=n(89933),O=n.n(r),m=n(45332),u=n.n(m),i=n(44194),A=n(51865),y=n.n(A),I=n(76287),M=n(93357),E=n(39378),t=n.n(E),f=n(31549),U="triones-antm-cascader-view",W=function(h){var Y=h.className,g=h.style,z=h.options,ln=h.labelInValue,j=ln===void 0?!1:ln,S=h.value,G=h.onChange,b=h.asyncRequest,s=(0,i.useState)(),F=u()(s,2),Z=F[0],H=F[1],sn=(0,i.useState)([]),$=u()(sn,2),v=$[0],k=$[1],on=(0,i.useState)([]),w=u()(on,2),p=w[0],N=w[1],rn=(0,i.useState)(S||[]),q=u()(rn,2),C=q[0],nn=q[1],J=function(e){return e.map(function(a){if(j)return a.value;var o;return(o=a.value)===null||o===void 0?void 0:o.value})},en=function(e,a){var o;if(!t().isEqual(e==null?void 0:e.value,(o=v[a])===null||o===void 0||(o=o.value)===null||o===void 0?void 0:o.value)){var P=[];Array.from({length:a+1},function(B,an){return an}).forEach(function(B){B==a?P.push({value:e,options:v[B].options}):P.push(v[B])}),t().isEmpty(e.children)?b==null||b().then(function(B){t().isArray(B)&&!t().isEmpty(B)&&(t().set(e,["children"],B),P.push({options:e.children}),H("".concat(a+1)))}):(P.push({options:e.children}),H("".concat(a+1))),k(P);var Q=J(P);nn(Q),G==null||G(Q)}};(0,i.useEffect)(function(){if(z&&!t().isEmpty(z)){var K={value:null,options:z};k([K])}else b==null||b().then(function(e){if(t().isArray(e)&&!t().isEmpty(e)){var a={value:null,options:e};k([a])}})},[z]);var un=function(){var K=O()(d()().mark(function e(){var a;return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return a=D()(v),t().forEach(C,function(){var Q=O()(d()().mark(function B(an,X){var tn,T;return d()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!(X<=t().size(a)-1)){V.next=11;break}if(tn=j?an:t().find(a[X].options,function(x){return x.value===an}),a[X].value=tn,T=t().find(a[X].options,function(x){return x.value===(tn==null?void 0:tn.value)}),!T){V.next=11;break}if(t().isEmpty(T==null?void 0:T.children)){V.next=9;break}t().set(a,[X+1,"options"],T==null?void 0:T.children),V.next=11;break;case 9:return V.next=11,b==null?void 0:b(T).then(function(x){t().isArray(x)&&!t().isEmpty(x)&&(t().set(T,["children"],x),t().set(a,[X+1,"options"],T==null?void 0:T.children))});case 11:case"end":return V.stop()}},B)}));return function(B,an){return Q.apply(this,arguments)}}()),P.abrupt("return",a);case 3:case"end":return P.stop()}},e)}));return function(){return K.apply(this,arguments)}}();return(0,i.useEffect)(function(){if(C!=null&&!t().isEmpty(v)){var K=J(v);t().isEqual(K,C)||t().isEmpty(v)||un().then(function(e){t().isEqual(J(e),J(v))||k(D()(e)),H("".concat(t().size(e)-1))})}},[C,v]),(0,i.useEffect)(function(){S!=null&&(t().isEqual(S,C)||nn(S))},[S]),(0,i.useEffect)(function(){if(!t().isEmpty(v)){var K=v.map(function(e,a){var o;return{key:"".concat(a),label:((o=e.value)===null||o===void 0?void 0:o.label)||"\u8BF7\u9009\u62E9",children:(0,f.jsx)(M.CascaderColumn,{index:a,labelInValue:j,options:e.options,value:e.value,onSelect:en})}});N(K)}},[v]),(0,f.jsx)("div",{className:y()(U,Y),style:g,children:(0,f.jsx)(I.default,{activeKey:Z,onChange:H,items:p,stretch:!1,style:{height:"100%"}})})}},81133:function(L,l,n){n.r(l);var _=n(72733);l.default=_.CascaderView},87033:function(L,l,n){n.r(l),n.d(l,{TabsContext:function(){return d}});var _=n(44194),d=(0,_.createContext)({items:[]})},76287:function(L,l,n){n.r(l);var _=n(70668),d=n(451),c=_.Tabs;c.Tab=d.Tab,l.default=c},73804:function(L,l,n){n.r(l),n.d(l,{TabNav:function(){return u}});var _=n(10154),d=n.n(_),c=n(44194),D=n(51865),r=n.n(D),O=n(31549),m="triones-antm-tabs",u=function(A){var y=A.label,I=A.active,M=A.stretch,E=A.onClick,t=(0,c.useRef)(null),f=(0,c.useRef)(null);return(0,O.jsx)("div",{ref:t,className:r()("".concat(m,"-tab"),d()(d()({},"".concat(m,"-tab-active"),I),"".concat(m,"-tab-stretch"),M)),onClick:function(W){E==null||E(W)},children:(0,O.jsx)("div",{ref:f,className:r()("".concat(m,"-tab-inner")),children:y})})}},29494:function(L,l,n){n.r(l),n.d(l,{TabPane:function(){return i}});var _=n(10154),d=n.n(_),c=n(51865),D=n.n(c),r=n(44194),O=n(87033),m=n(31549),u="triones-antm-tabs",i=function(y){var I=y.children,M=y.tabKey,E=(0,r.useContext)(O.TabsContext),t=E.activeKey;return(0,m.jsx)("div",{className:D()("".concat(u,"-tab-pane"),d()({},"".concat(u,"-tab-pane-active"),t==M)),children:I})}},451:function(L,l,n){n.r(l),n.d(l,{Tab:function(){return _}});var _=function(c){var D=c.children,r=c.key,O=c.label;return null}},70668:function(L,l,n){n.r(l),n.d(l,{Tabs:function(){return W}});var _=n(76711),d=n.n(_),c=n(45332),D=n.n(c),r=n(44194),O=n(451),m=n(51865),u=n.n(m),i=n(87033),A=n(68466),y=n(73804),I=n(29494),M=n(39378),E=n.n(M),t=n(31549),f="triones-antm-tabs",U=function(R){return R[R.SET_ITEMS=0]="SET_ITEMS",R[R.ADD_ITEM=1]="ADD_ITEM",R}(U||{}),W=function(h){var Y,g=h.children,z=h.className,ln=h.style,j=h.activeKey,S=h.defaultActiveKey,G=h.stretch,b=G===void 0?!0:G,s=h.items,F=h.onTabClick,Z=h.onChange,H=(0,r.useRef)(null),sn=(0,r.useState)(),$=D()(sn,2),v=$[0],k=$[1],on=(0,r.useState)(j||S||(s==null||(Y=s[0])===null||Y===void 0?void 0:Y.key)),w=D()(on,2),p=w[0],N=w[1],rn=(0,r.useReducer)(function(e,a){switch(a.type){case U.SET_ITEMS:return a.payload;case U.ADD_ITEM:return[].concat(d()(e),[a.payload])}return e},s||[]),q=D()(rn,2),C=q[0],nn=q[1],J=function(a,o){F==null||F(a,o),N(a)},en=function(a){nn({type:U.SET_ITEMS,payload:a})},un=function(a){nn({type:U.ADD_ITEM,payload:a})},K=function(a){Z==null||Z(a)};return(0,r.useEffect)(function(){j!=null&&j!=p&&N(j)},[j]),(0,r.useEffect)(function(){s!=null&&(E().isEqual(s,C)||en(s))},[s]),(0,r.useEffect)(function(){if(p){if(!(s!=null&&s.map(function(Q){return Q.key}).includes(p))){var e,a;N(s==null||(e=s[0])===null||e===void 0?void 0:e.key),K(s==null||(a=s[0])===null||a===void 0?void 0:a.key)}}else{var o,P;N(s==null||(o=s[0])===null||o===void 0?void 0:o.key),K(s==null||(P=s[0])===null||P===void 0?void 0:P.key)}},[p,C]),(0,r.useEffect)(function(){if(g&&E().isArray(g)){var e=g.filter(function(a){return a.type==O.Tab}).map(function(a){return{key:a.key,label:a.props.label,children:a.props.children}});en(e),N(j||S||(e==null?void 0:e[0].key))}},[g]),(0,t.jsx)(i.TabsContext.Provider,{value:{activeKey:p,setActiveKey:N,items:C||[],setItems:en,addItem:un},children:(0,t.jsxs)("div",{className:u()(f,z),style:ln,children:[(0,t.jsx)("div",{className:u()("".concat(f,"-nav")),children:(0,t.jsx)("div",{className:u()("".concat(f,"-nav-wrap")),children:(0,t.jsxs)("div",{ref:H,className:u()("".concat(f,"-nav-list")),children:[(0,t.jsx)("div",{className:u()("".concat(f,"-ink-bar"),"".concat(f,"-ink-bar-animated")),style:{left:v==null?void 0:v.left,width:v==null?void 0:v.width}}),!E().isEmpty(C)&&(C==null?void 0:C.map(function(e,a){return(0,t.jsx)(y.TabNav,{active:p==e.key,stretch:b,label:e.label,onClick:function(P){J(e.key,P)}},a)}))]})})}),(0,t.jsx)("div",{className:u()("".concat(f,"-content-holder")),children:(0,t.jsx)("div",{className:u()("".concat(f,"-content")),children:!E().isEmpty(C)&&(C==null?void 0:C.map(function(e,a){return(0,t.jsx)(I.TabPane,{tabKey:e.key,children:e.children},e.key)}))})})]})})}},68466:function(L,l,n){n.r(l)}}]);
